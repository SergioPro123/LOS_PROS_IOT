{"version":3,"sources":["webpack:///node_modules/ng2-mqtt/mqttws31.js","webpack:///src/app/componentsIoT/control/control.component.html","webpack:///src/app/componentsIoT/monitor/monitor.component.html","webpack:///src/app/componentsIoT/setting/setting.component.html","webpack:///src/app/home/home.page.html","webpack:///src/app/componentsIoT/control/control.component.scss","webpack:///src/app/componentsIoT/control/control.component.ts","webpack:///src/app/componentsIoT/monitor/monitor.component.scss","webpack:///src/app/componentsIoT/monitor/monitor.component.ts","webpack:///src/app/componentsIoT/setting/setting.component.scss","webpack:///src/app/componentsIoT/setting/setting.component.ts","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts","webpack:///src/app/services/iot.service.ts"],"names":["Paho","MQTT","global","version","buildLevel","MESSAGE_TYPE","CONNECT","CONNACK","PUBLISH","PUBACK","PUBREC","PUBREL","PUBCOMP","SUBSCRIBE","SUBACK","UNSUBSCRIBE","UNSUBACK","PINGREQ","PINGRESP","DISCONNECT","validate","obj","keys","key","hasOwnProperty","Error","format","ERROR","INVALID_TYPE","errorStr","scope","f","apply","arguments","OK","code","text","CONNECT_TIMEOUT","SUBSCRIBE_TIMEOUT","UNSUBSCRIBE_TIMEOUT","PING_TIMEOUT","INTERNAL_ERROR","CONNACK_RETURNCODE","SOCKET_ERROR","SOCKET_CLOSE","MALFORMED_UTF","UNSUPPORTED","INVALID_STATE","INVALID_ARGUMENT","UNSUPPORTED_OPERATION","INVALID_STORED_DATA","INVALID_MQTT_MESSAGE_TYPE","MALFORMED_UNICODE","CONNACK_RC","error","substitutions","field","start","i","length","indexOf","part1","substring","part2","MqttProtoIdentifierv3","MqttProtoIdentifierv4","WireMessage","type","options","name","prototype","encode","first","remLength","topicStrLength","Array","destinationNameLength","messageIdentifier","undefined","mqttVersion","UTF8Length","clientId","willMessage","destinationName","willMessagePayloadBytes","payloadBytes","Uint8Array","byteLength","userName","password","topics","requestedQos","payloadMessage","duplicate","qos","retained","ArrayBuffer","buffer","mbi","encodeMBI","pos","byteStream","set","writeString","connectFlags","cleanSession","writeUint16","keepAliveInterval","decodeMessage","input","startingPos","messageInfo","digit","multiplier","endPos","wireMessage","connectAcknowledgeFlags","sessionPresent","returnCode","len","readUint16","topicName","parseUTF8","message","Message","subarray","offset","utf8Length","stringToUTF8","number","output","numBytes","charCode","charCodeAt","lowCharCode","isNaN","utf16","byte1","byte2","toString","byte3","byte4","String","fromCharCode","Pinger","client","window","_client","_window","_keepAliveInterval","isReset","pingReq","doTimeout","pinger","doPing","_trace","_disconnected","socket","send","timeout","setTimeout","reset","clearTimeout","cancel","Timeout","timeoutSeconds","action","args","ClientImpl","uri","host","port","path","_localKey","_msg_queue","_sentMessages","_receivedMessages","_notify_msg_sent","_message_identifier","_sequence","localStorage","restore","connected","maxMessageIdentifier","connectOptions","hostIndex","onConnectionLost","onMessageDelivered","onMessageArrived","traceFunction","_connectTimeout","sendPinger","receivePinger","receiveBuffer","_traceBuffer","_MAX_TRACE_ENTRIES","connect","connectOptionsMasked","_traceMask","uris","_doConnect","subscribe","filter","subscribeOptions","onSuccess","grantedQos","invocationContext","onFailure","errorCode","timeOut","errorMessage","_requires_ack","_schedule_message","unsubscribe","unsubscribeOptions","callback","disconnect","getTraceLog","Date","startTrace","stopTrace","wsurl","useSSL","uriParts","split","join","WebSocket","binaryType","onopen","_on_socket_open","onmessage","_on_socket_message","onerror","_on_socket_error","onclose","_on_socket_close","push","_process_queue","store","prefix","storedMessage","pubRecReceived","hex","messageBytes","payloadHex","sequence","setItem","JSON","stringify","value","getItem","parse","x","parseInt","fifo","reverse","pop","_socket_send","messageCount","Object","event","data","messages","_deframeMessages","_handleMessage","byteArray","newData","result","stack","sentMessage","removeItem","receivedMessage","sequencedMessages","msgId","sort","a","b","pubRelMessage","_receivePublish","_receiveMessage","pubCompMessage","wireMessageMasked","pubAckMessage","pubRecMessage","wireMmessage","errorText","readyState","close","mqttVersionExplicit","record","slice","call","severity","max","shift","traceObject","masked","traceObjectMasked","attr","Client","match","ipv6AddSBracket","clientIdLength","_getHost","_setHost","_getPort","_setPort","_getPath","_setPath","_getURI","_setURI","_getClientId","_setClientId","_getOnConnectionLost","_setOnConnectionLost","newOnConnectionLost","_getOnMessageDelivered","_setOnMessageDelivered","newOnMessageDelivered","_getOnMessageArrived","_setOnMessageArrived","newOnMessageArrived","_getTrace","_setTrace","trace","hosts","ports","stringPayload","usingURIs","test","ipv6","topic","payload","isConnected","newHost","newPort","newPath","newClientId","newTraceFunction","newPayload","Int8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","_getPayloadString","_getPayloadBytes","_getDestinationName","_setDestinationName","newDestinationName","_getQos","_setQos","newQos","_getRetained","_setRetained","newRetained","_getDuplicate","_setDuplicate","newDuplicate","payloadString","exports","ControlComponent","toast","navparams","modal","inicio","paridad","estado","encendido","confirmacion","cierre","textBtn","colorBtn","imgBtn","mqttbroker","newState","sendMessage","userID","get","Number","onMessage","bind","onConnect","dismiss","console","log","packet","responseObject","warning","changeProp","selector","template","MonitorComponent","lineChartData","label","lineChartLabels","lineChartOptions","responsive","scales","xAxes","display","lineChartLegend","lineChartPlugins","lineChartType","temp","generateChart","varTemp","SettingComponent","color","routes","component","HomePageRoutingModule","imports","forChild","HomePageModule","declarations","HomePage","auth","iotService","router","AFauth","logout","authState","uid","consultId","resultado","setting","monitor","create","componentProps","then","present","IotService","db","collection","doc","snapshotChanges","title","toastr","success","info","providedIn"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["/*******************************************************************************\r\n * Copyright (c) 2013 IBM Corp.\r\n *\r\n * All rights reserved. This program and the accompanying materials\r\n * are made available under the terms of the Eclipse Public License v1.0\r\n * and Eclipse Distribution License v1.0 which accompany this distribution. \r\n *\r\n * The Eclipse Public License is available at \r\n *    http://www.eclipse.org/legal/epl-v10.html\r\n * and the Eclipse Distribution License is available at \r\n *   http://www.eclipse.org/org/documents/edl-v10.php.\r\n *\r\n * Contributors:\r\n *    Andrew Banks - initial API and implementation and initial documentation\r\n *******************************************************************************/\r\n\r\n\r\n// Only expose a single object name in the global namespace.\r\n// Everything must go through this module. Global Paho.MQTT module\r\n// only has a single public function, client, which returns\r\n// a Paho.MQTT client object given connection details.\r\n \r\n/**\r\n * Send and receive messages using web browsers.\r\n * <p> \r\n * This programming interface lets a JavaScript client application use the MQTT V3.1 or\r\n * V3.1.1 protocol to connect to an MQTT-supporting messaging server.\r\n *  \r\n * The function supported includes:\r\n * <ol>\r\n * <li>Connecting to and disconnecting from a server. The server is identified by its host name and port number. \r\n * <li>Specifying options that relate to the communications link with the server, \r\n * for example the frequency of keep-alive heartbeats, and whether SSL/TLS is required.\r\n * <li>Subscribing to and receiving messages from MQTT Topics.\r\n * <li>Publishing messages to MQTT Topics.\r\n * </ol>\r\n * <p>\r\n * The API consists of two main objects:\r\n * <dl>\r\n * <dt><b>{@link Paho.MQTT.Client}</b></dt>\r\n * <dd>This contains methods that provide the functionality of the API,\r\n * including provision of callbacks that notify the application when a message\r\n * arrives from or is delivered to the messaging server,\r\n * or when the status of its connection to the messaging server changes.</dd>\r\n * <dt><b>{@link Paho.MQTT.Message}</b></dt>\r\n * <dd>This encapsulates the payload of the message along with various attributes\r\n * associated with its delivery, in particular the destination to which it has\r\n * been (or is about to be) sent.</dd>\r\n * </dl> \r\n * <p>\r\n * The programming interface validates parameters passed to it, and will throw\r\n * an Error containing an error message intended for developer use, if it detects\r\n * an error with any parameter.\r\n * <p>\r\n * Example:\r\n * \r\n * <code><pre>\r\nclient = new Paho.MQTT.Client(location.hostname, Number(location.port), \"clientId\");\r\nclient.onConnectionLost = onConnectionLost;\r\nclient.onMessageArrived = onMessageArrived;\r\nclient.connect({onSuccess:onConnect});\r\n\r\nfunction onConnect() {\r\n  // Once a connection has been made, make a subscription and send a message.\r\n  console.log(\"onConnect\");\r\n  client.subscribe(\"/World\");\r\n  message = new Paho.MQTT.Message(\"Hello\");\r\n  message.destinationName = \"/World\";\r\n  client.send(message); \r\n};\r\nfunction onConnectionLost(responseObject) {\r\n  if (responseObject.errorCode !== 0)\r\n\tconsole.log(\"onConnectionLost:\"+responseObject.errorMessage);\r\n};\r\nfunction onMessageArrived(message) {\r\n  console.log(\"onMessageArrived:\"+message.payloadString);\r\n  client.disconnect(); \r\n};\t\r\n * </pre></code>\r\n * @namespace Paho.MQTT \r\n */\r\n\r\nif (typeof Paho === \"undefined\") {\r\n\tPaho = {};\r\n}\r\n\r\nPaho.MQTT = (function (global) {\r\n\r\n\t// Private variables below, these are only visible inside the function closure\r\n\t// which is used to define the module. \r\n\r\n\tvar version = \"@VERSION@\";\r\n\tvar buildLevel = \"@BUILDLEVEL@\";\r\n\t\r\n\t/** \r\n\t * Unique message type identifiers, with associated\r\n\t * associated integer values.\r\n\t * @private \r\n\t */\r\n\tvar MESSAGE_TYPE = {\r\n\t\tCONNECT: 1, \r\n\t\tCONNACK: 2, \r\n\t\tPUBLISH: 3,\r\n\t\tPUBACK: 4,\r\n\t\tPUBREC: 5, \r\n\t\tPUBREL: 6,\r\n\t\tPUBCOMP: 7,\r\n\t\tSUBSCRIBE: 8,\r\n\t\tSUBACK: 9,\r\n\t\tUNSUBSCRIBE: 10,\r\n\t\tUNSUBACK: 11,\r\n\t\tPINGREQ: 12,\r\n\t\tPINGRESP: 13,\r\n\t\tDISCONNECT: 14\r\n\t};\r\n\t\r\n\t// Collection of utility methods used to simplify module code \r\n\t// and promote the DRY pattern.  \r\n\r\n\t/**\r\n\t * Validate an object's parameter names to ensure they \r\n\t * match a list of expected variables name for this option\r\n\t * type. Used to ensure option object passed into the API don't\r\n\t * contain erroneous parameters.\r\n\t * @param {Object} obj - User options object\r\n\t * @param {Object} keys - valid keys and types that may exist in obj. \r\n\t * @throws {Error} Invalid option parameter found. \r\n\t * @private \r\n\t */\r\n\tvar validate = function(obj, keys) {\r\n\t\tfor (var key in obj) {\r\n\t\t\tif (obj.hasOwnProperty(key)) {       \t\t\r\n\t\t\t\tif (keys.hasOwnProperty(key)) {\r\n\t\t\t\t\tif (typeof obj[key] !== keys[key])\r\n\t\t\t\t\t   throw new Error(format(ERROR.INVALID_TYPE, [typeof obj[key], key]));\r\n\t\t\t\t} else {\t\r\n\t\t\t\t\tvar errorStr = \"Unknown property, \" + key + \". Valid properties are:\";\r\n\t\t\t\t\tfor (var key in keys)\r\n\t\t\t\t\t\tif (keys.hasOwnProperty(key))\r\n\t\t\t\t\t\t\terrorStr = errorStr+\" \"+key;\r\n\t\t\t\t\tthrow new Error(errorStr);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Return a new function which runs the user function bound\r\n\t * to a fixed scope. \r\n\t * @param {function} User function\r\n\t * @param {object} Function scope  \r\n\t * @return {function} User function bound to another scope\r\n\t * @private \r\n\t */\r\n\tvar scope = function (f, scope) {\r\n\t\treturn function () {\r\n\t\t\treturn f.apply(scope, arguments);\r\n\t\t};\r\n\t};\r\n\t\r\n\t/** \r\n\t * Unique message type identifiers, with associated\r\n\t * associated integer values.\r\n\t * @private \r\n\t */\r\n\tvar ERROR = {\r\n\t\tOK: {code:0, text:\"AMQJSC0000I OK.\"},\r\n\t\tCONNECT_TIMEOUT: {code:1, text:\"AMQJSC0001E Connect timed out.\"},\r\n\t\tSUBSCRIBE_TIMEOUT: {code:2, text:\"AMQJS0002E Subscribe timed out.\"}, \r\n\t\tUNSUBSCRIBE_TIMEOUT: {code:3, text:\"AMQJS0003E Unsubscribe timed out.\"},\r\n\t\tPING_TIMEOUT: {code:4, text:\"AMQJS0004E Ping timed out.\"},\r\n\t\tINTERNAL_ERROR: {code:5, text:\"AMQJS0005E Internal error. Error Message: {0}, Stack trace: {1}\"},\r\n\t\tCONNACK_RETURNCODE: {code:6, text:\"AMQJS0006E Bad Connack return code:{0} {1}.\"},\r\n\t\tSOCKET_ERROR: {code:7, text:\"AMQJS0007E Socket error:{0}.\"},\r\n\t\tSOCKET_CLOSE: {code:8, text:\"AMQJS0008I Socket closed.\"},\r\n\t\tMALFORMED_UTF: {code:9, text:\"AMQJS0009E Malformed UTF data:{0} {1} {2}.\"},\r\n\t\tUNSUPPORTED: {code:10, text:\"AMQJS0010E {0} is not supported by this browser.\"},\r\n\t\tINVALID_STATE: {code:11, text:\"AMQJS0011E Invalid state {0}.\"},\r\n\t\tINVALID_TYPE: {code:12, text:\"AMQJS0012E Invalid type {0} for {1}.\"},\r\n\t\tINVALID_ARGUMENT: {code:13, text:\"AMQJS0013E Invalid argument {0} for {1}.\"},\r\n\t\tUNSUPPORTED_OPERATION: {code:14, text:\"AMQJS0014E Unsupported operation.\"},\r\n\t\tINVALID_STORED_DATA: {code:15, text:\"AMQJS0015E Invalid data in local storage key={0} value={1}.\"},\r\n\t\tINVALID_MQTT_MESSAGE_TYPE: {code:16, text:\"AMQJS0016E Invalid MQTT message type {0}.\"},\r\n\t\tMALFORMED_UNICODE: {code:17, text:\"AMQJS0017E Malformed Unicode string:{0} {1}.\"},\r\n\t};\r\n\t\r\n\t/** CONNACK RC Meaning. */\r\n\tvar CONNACK_RC = {\r\n\t\t0:\"Connection Accepted\",\r\n\t\t1:\"Connection Refused: unacceptable protocol version\",\r\n\t\t2:\"Connection Refused: identifier rejected\",\r\n\t\t3:\"Connection Refused: server unavailable\",\r\n\t\t4:\"Connection Refused: bad user name or password\",\r\n\t\t5:\"Connection Refused: not authorized\"\r\n\t};\r\n\r\n\t/**\r\n\t * Format an error message text.\r\n\t * @private\r\n\t * @param {error} ERROR.KEY value above.\r\n\t * @param {substitutions} [array] substituted into the text.\r\n\t * @return the text with the substitutions made.\r\n\t */\r\n\tvar format = function(error, substitutions) {\r\n\t\tvar text = error.text;\r\n\t\tif (substitutions) {\r\n\t\t  var field,start;\r\n\t\t  for (var i=0; i<substitutions.length; i++) {\r\n\t\t\tfield = \"{\"+i+\"}\";\r\n\t\t\tstart = text.indexOf(field);\r\n\t\t\tif(start > 0) {\r\n\t\t\t\tvar part1 = text.substring(0,start);\r\n\t\t\t\tvar part2 = text.substring(start+field.length);\r\n\t\t\t\ttext = part1+substitutions[i]+part2;\r\n\t\t\t}\r\n\t\t  }\r\n\t\t}\r\n\t\treturn text;\r\n\t};\r\n\t\r\n\t//MQTT protocol and version          6    M    Q    I    s    d    p    3\r\n\tvar MqttProtoIdentifierv3 = [0x00,0x06,0x4d,0x51,0x49,0x73,0x64,0x70,0x03];\r\n\t//MQTT proto/version for 311         4    M    Q    T    T    4\r\n\tvar MqttProtoIdentifierv4 = [0x00,0x04,0x4d,0x51,0x54,0x54,0x04];\r\n\t\r\n\t/**\r\n\t * Construct an MQTT wire protocol message.\r\n\t * @param type MQTT packet type.\r\n\t * @param options optional wire message attributes.\r\n\t * \r\n\t * Optional properties\r\n\t * \r\n\t * messageIdentifier: message ID in the range [0..65535]\r\n\t * payloadMessage:\tApplication Message - PUBLISH only\r\n\t * connectStrings:\tarray of 0 or more Strings to be put into the CONNECT payload\r\n\t * topics:\t\t\tarray of strings (SUBSCRIBE, UNSUBSCRIBE)\r\n\t * requestQoS:\t\tarray of QoS values [0..2]\r\n\t *  \r\n\t * \"Flag\" properties \r\n\t * cleanSession:\ttrue if present / false if absent (CONNECT)\r\n\t * willMessage:  \ttrue if present / false if absent (CONNECT)\r\n\t * isRetained:\t\ttrue if present / false if absent (CONNECT)\r\n\t * userName:\t\ttrue if present / false if absent (CONNECT)\r\n\t * password:\t\ttrue if present / false if absent (CONNECT)\r\n\t * keepAliveInterval:\tinteger [0..65535]  (CONNECT)\r\n\t *\r\n\t * @private\r\n\t * @ignore\r\n\t */\r\n\tvar WireMessage = function (type, options) { \t\r\n\t\tthis.type = type;\r\n\t\tfor (var name in options) {\r\n\t\t\tif (options.hasOwnProperty(name)) {\r\n\t\t\t\tthis[name] = options[name];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t\r\n\tWireMessage.prototype.encode = function() {\r\n\t\t// Compute the first byte of the fixed header\r\n\t\tvar first = ((this.type & 0x0f) << 4);\r\n\t\t\r\n\t\t/*\r\n\t\t * Now calculate the length of the variable header + payload by adding up the lengths\r\n\t\t * of all the component parts\r\n\t\t */\r\n\r\n\t\tvar remLength = 0;\r\n\t\tvar topicStrLength = new Array();\r\n\t\tvar destinationNameLength = 0;\r\n\t\t\r\n\t\t// if the message contains a messageIdentifier then we need two bytes for that\r\n\t\tif (this.messageIdentifier != undefined)\r\n\t\t\tremLength += 2;\r\n\r\n\t\tswitch(this.type) {\r\n\t\t\t// If this a Connect then we need to include 12 bytes for its header\r\n\t\t\tcase MESSAGE_TYPE.CONNECT:\r\n\t\t\t\tswitch(this.mqttVersion) {\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\tremLength += MqttProtoIdentifierv3.length + 3;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\tremLength += MqttProtoIdentifierv4.length + 3;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tremLength += UTF8Length(this.clientId) + 2;\r\n\t\t\t\tif (this.willMessage != undefined) {\r\n\t\t\t\t\tremLength += UTF8Length(this.willMessage.destinationName) + 2;\r\n\t\t\t\t\t// Will message is always a string, sent as UTF-8 characters with a preceding length.\r\n\t\t\t\t\tvar willMessagePayloadBytes = this.willMessage.payloadBytes;\r\n\t\t\t\t\tif (!(willMessagePayloadBytes instanceof Uint8Array))\r\n\t\t\t\t\t\twillMessagePayloadBytes = new Uint8Array(payloadBytes);\r\n\t\t\t\t\tremLength += willMessagePayloadBytes.byteLength +2;\r\n\t\t\t\t}\r\n\t\t\t\tif (this.userName != undefined)\r\n\t\t\t\t\tremLength += UTF8Length(this.userName) + 2;\t\r\n\t\t\t\tif (this.password != undefined)\r\n\t\t\t\t\tremLength += UTF8Length(this.password) + 2;\r\n\t\t\tbreak;\r\n\r\n\t\t\t// Subscribe, Unsubscribe can both contain topic strings\r\n\t\t\tcase MESSAGE_TYPE.SUBSCRIBE:\t        \t\r\n\t\t\t\tfirst |= 0x02; // Qos = 1;\r\n\t\t\t\tfor ( var i = 0; i < this.topics.length; i++) {\r\n\t\t\t\t\ttopicStrLength[i] = UTF8Length(this.topics[i]);\r\n\t\t\t\t\tremLength += topicStrLength[i] + 2;\r\n\t\t\t\t}\r\n\t\t\t\tremLength += this.requestedQos.length; // 1 byte for each topic's Qos\r\n\t\t\t\t// QoS on Subscribe only\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.UNSUBSCRIBE:\r\n\t\t\t\tfirst |= 0x02; // Qos = 1;\r\n\t\t\t\tfor ( var i = 0; i < this.topics.length; i++) {\r\n\t\t\t\t\ttopicStrLength[i] = UTF8Length(this.topics[i]);\r\n\t\t\t\t\tremLength += topicStrLength[i] + 2;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBREL:\r\n\t\t\t\tfirst |= 0x02; // Qos = 1;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\r\n\t\t\t\tif (this.payloadMessage.duplicate) first |= 0x08;\r\n\t\t\t\tfirst  = first |= (this.payloadMessage.qos << 1);\r\n\t\t\t\tif (this.payloadMessage.retained) first |= 0x01;\r\n\t\t\t\tdestinationNameLength = UTF8Length(this.payloadMessage.destinationName);\r\n\t\t\t\tremLength += destinationNameLength + 2;\t   \r\n\t\t\t\tvar payloadBytes = this.payloadMessage.payloadBytes;\r\n\t\t\t\tremLength += payloadBytes.byteLength;  \r\n\t\t\t\tif (payloadBytes instanceof ArrayBuffer)\r\n\t\t\t\t\tpayloadBytes = new Uint8Array(payloadBytes);\r\n\t\t\t\telse if (!(payloadBytes instanceof Uint8Array))\r\n\t\t\t\t\tpayloadBytes = new Uint8Array(payloadBytes.buffer);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.DISCONNECT:\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t;\r\n\t\t}\r\n\r\n\t\t// Now we can allocate a buffer for the message\r\n\r\n\t\tvar mbi = encodeMBI(remLength);  // Convert the length to MQTT MBI format\r\n\t\tvar pos = mbi.length + 1;        // Offset of start of variable header\r\n\t\tvar buffer = new ArrayBuffer(remLength + pos);\r\n\t\tvar byteStream = new Uint8Array(buffer);    // view it as a sequence of bytes\r\n\r\n\t\t//Write the fixed header into the buffer\r\n\t\tbyteStream[0] = first;\r\n\t\tbyteStream.set(mbi,1);\r\n\r\n\t\t// If this is a PUBLISH then the variable header starts with a topic\r\n\t\tif (this.type == MESSAGE_TYPE.PUBLISH)\r\n\t\t\tpos = writeString(this.payloadMessage.destinationName, destinationNameLength, byteStream, pos);\r\n\t\t// If this is a CONNECT then the variable header contains the protocol name/version, flags and keepalive time\r\n\t\t\r\n\t\telse if (this.type == MESSAGE_TYPE.CONNECT) {\r\n\t\t\tswitch (this.mqttVersion) {\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tbyteStream.set(MqttProtoIdentifierv3, pos);\r\n\t\t\t\t\tpos += MqttProtoIdentifierv3.length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 4:\r\n\t\t\t\t\tbyteStream.set(MqttProtoIdentifierv4, pos);\r\n\t\t\t\t\tpos += MqttProtoIdentifierv4.length;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\tvar connectFlags = 0;\r\n\t\t\tif (this.cleanSession) \r\n\t\t\t\tconnectFlags = 0x02;\r\n\t\t\tif (this.willMessage != undefined ) {\r\n\t\t\t\tconnectFlags |= 0x04;\r\n\t\t\t\tconnectFlags |= (this.willMessage.qos<<3);\r\n\t\t\t\tif (this.willMessage.retained) {\r\n\t\t\t\t\tconnectFlags |= 0x20;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.userName != undefined)\r\n\t\t\t\tconnectFlags |= 0x80;\r\n\t\t\tif (this.password != undefined)\r\n\t\t\t\tconnectFlags |= 0x40;\r\n\t\t\tbyteStream[pos++] = connectFlags; \r\n\t\t\tpos = writeUint16 (this.keepAliveInterval, byteStream, pos);\r\n\t\t}\r\n\r\n\t\t// Output the messageIdentifier - if there is one\r\n\t\tif (this.messageIdentifier != undefined)\r\n\t\t\tpos = writeUint16 (this.messageIdentifier, byteStream, pos);\r\n\r\n\t\tswitch(this.type) {\r\n\t\t\tcase MESSAGE_TYPE.CONNECT:\r\n\t\t\t\tpos = writeString(this.clientId, UTF8Length(this.clientId), byteStream, pos); \r\n\t\t\t\tif (this.willMessage != undefined) {\r\n\t\t\t\t\tpos = writeString(this.willMessage.destinationName, UTF8Length(this.willMessage.destinationName), byteStream, pos);\r\n\t\t\t\t\tpos = writeUint16(willMessagePayloadBytes.byteLength, byteStream, pos);\r\n\t\t\t\t\tbyteStream.set(willMessagePayloadBytes, pos);\r\n\t\t\t\t\tpos += willMessagePayloadBytes.byteLength;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\tif (this.userName != undefined)\r\n\t\t\t\tpos = writeString(this.userName, UTF8Length(this.userName), byteStream, pos);\r\n\t\t\tif (this.password != undefined) \r\n\t\t\t\tpos = writeString(this.password, UTF8Length(this.password), byteStream, pos);\r\n\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\t\r\n\t\t\t\t// PUBLISH has a text or binary payload, if text do not add a 2 byte length field, just the UTF characters.\t\r\n\t\t\t\tbyteStream.set(payloadBytes, pos);\r\n\t\t\t\t\t\r\n\t\t\t\tbreak;\r\n\r\n//    \t    case MESSAGE_TYPE.PUBREC:\t\r\n//    \t    case MESSAGE_TYPE.PUBREL:\t\r\n//    \t    case MESSAGE_TYPE.PUBCOMP:\t\r\n//    \t    \tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.SUBSCRIBE:\r\n\t\t\t\t// SUBSCRIBE has a list of topic strings and request QoS\r\n\t\t\t\tfor (var i=0; i<this.topics.length; i++) {\r\n\t\t\t\t\tpos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\r\n\t\t\t\t\tbyteStream[pos++] = this.requestedQos[i];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.UNSUBSCRIBE:\t\r\n\t\t\t\t// UNSUBSCRIBE has a list of topic strings\r\n\t\t\t\tfor (var i=0; i<this.topics.length; i++)\r\n\t\t\t\t\tpos = writeString(this.topics[i], topicStrLength[i], byteStream, pos);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// Do nothing.\r\n\t\t}\r\n\r\n\t\treturn buffer;\r\n\t}\t\r\n\r\n\tfunction decodeMessage(input,pos) {\r\n\t    var startingPos = pos;\r\n\t\tvar first = input[pos];\r\n\t\tvar type = first >> 4;\r\n\t\tvar messageInfo = first &= 0x0f;\r\n\t\tpos += 1;\r\n\t\t\r\n\r\n\t\t// Decode the remaining length (MBI format)\r\n\r\n\t\tvar digit;\r\n\t\tvar remLength = 0;\r\n\t\tvar multiplier = 1;\r\n\t\tdo {\r\n\t\t\tif (pos == input.length) {\r\n\t\t\t    return [null,startingPos];\r\n\t\t\t}\r\n\t\t\tdigit = input[pos++];\r\n\t\t\tremLength += ((digit & 0x7F) * multiplier);\r\n\t\t\tmultiplier *= 128;\r\n\t\t} while ((digit & 0x80) != 0);\r\n\t\t\r\n\t\tvar endPos = pos+remLength;\r\n\t\tif (endPos > input.length) {\r\n\t\t    return [null,startingPos];\r\n\t\t}\r\n\r\n\t\tvar wireMessage = new WireMessage(type);\r\n\t\tswitch(type) {\r\n\t\t\tcase MESSAGE_TYPE.CONNACK:\r\n\t\t\t\tvar connectAcknowledgeFlags = input[pos++];\r\n\t\t\t\tif (connectAcknowledgeFlags & 0x01)\r\n\t\t\t\t\twireMessage.sessionPresent = true;\r\n\t\t\t\twireMessage.returnCode = input[pos++];\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.PUBLISH:     \t    \t\r\n\t\t\t\tvar qos = (messageInfo >> 1) & 0x03;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\tvar len = readUint16(input, pos);\r\n\t\t\t\tpos += 2;\r\n\t\t\t\tvar topicName = parseUTF8(input, pos, len);\r\n\t\t\t\tpos += len;\r\n\t\t\t\t// If QoS 1 or 2 there will be a messageIdentifier\r\n\t\t\t\tif (qos > 0) {\r\n\t\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\r\n\t\t\t\t\tpos += 2;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar message = new Paho.MQTT.Message(input.subarray(pos, endPos));\r\n\t\t\t\tif ((messageInfo & 0x01) == 0x01) \r\n\t\t\t\t\tmessage.retained = true;\r\n\t\t\t\tif ((messageInfo & 0x08) == 0x08)\r\n\t\t\t\t\tmessage.duplicate =  true;\r\n\t\t\t\tmessage.qos = qos;\r\n\t\t\t\tmessage.destinationName = topicName;\r\n\t\t\t\twireMessage.payloadMessage = message;\t\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase  MESSAGE_TYPE.PUBACK:\r\n\t\t\tcase  MESSAGE_TYPE.PUBREC:\t    \r\n\t\t\tcase  MESSAGE_TYPE.PUBREL:    \r\n\t\t\tcase  MESSAGE_TYPE.PUBCOMP:\r\n\t\t\tcase  MESSAGE_TYPE.UNSUBACK:    \t    \t\r\n\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase  MESSAGE_TYPE.SUBACK:\r\n\t\t\t\twireMessage.messageIdentifier = readUint16(input, pos);\r\n\t\t\t\tpos += 2;\r\n\t\t\t\twireMessage.returnCode = input.subarray(pos, endPos);\t\r\n\t\t\t\tbreak;\r\n\t\t\r\n\t\t\tdefault:\r\n\t\t\t\t;\r\n\t\t}\r\n\t\t\t\t\r\n\t\treturn [wireMessage,endPos];\t\r\n\t}\r\n\r\n\tfunction writeUint16(input, buffer, offset) {\r\n\t\tbuffer[offset++] = input >> 8;      //MSB\r\n\t\tbuffer[offset++] = input % 256;     //LSB \r\n\t\treturn offset;\r\n\t}\t\r\n\r\n\tfunction writeString(input, utf8Length, buffer, offset) {\r\n\t\toffset = writeUint16(utf8Length, buffer, offset);\r\n\t\tstringToUTF8(input, buffer, offset);\r\n\t\treturn offset + utf8Length;\r\n\t}\t\r\n\r\n\tfunction readUint16(buffer, offset) {\r\n\t\treturn 256*buffer[offset] + buffer[offset+1];\r\n\t}\t\r\n\r\n\t/**\r\n\t * Encodes an MQTT Multi-Byte Integer\r\n\t * @private \r\n\t */\r\n\tfunction encodeMBI(number) {\r\n\t\tvar output = new Array(1);\r\n\t\tvar numBytes = 0;\r\n\r\n\t\tdo {\r\n\t\t\tvar digit = number % 128;\r\n\t\t\tnumber = number >> 7;\r\n\t\t\tif (number > 0) {\r\n\t\t\t\tdigit |= 0x80;\r\n\t\t\t}\r\n\t\t\toutput[numBytes++] = digit;\r\n\t\t} while ( (number > 0) && (numBytes<4) );\r\n\r\n\t\treturn output;\r\n\t}\r\n\r\n\t/**\r\n\t * Takes a String and calculates its length in bytes when encoded in UTF8.\r\n\t * @private\r\n\t */\r\n\tfunction UTF8Length(input) {\r\n\t\tvar output = 0;\r\n\t\tfor (var i = 0; i<input.length; i++) \r\n\t\t{\r\n\t\t\tvar charCode = input.charCodeAt(i);\r\n\t\t\t\tif (charCode > 0x7FF)\r\n\t\t\t\t   {\r\n\t\t\t\t\t  // Surrogate pair means its a 4 byte character\r\n\t\t\t\t\t  if (0xD800 <= charCode && charCode <= 0xDBFF)\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t  i++;\r\n\t\t\t\t\t\t  output++;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t   output +=3;\r\n\t\t\t\t   }\r\n\t\t\telse if (charCode > 0x7F)\r\n\t\t\t\toutput +=2;\r\n\t\t\telse\r\n\t\t\t\toutput++;\r\n\t\t} \r\n\t\treturn output;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Takes a String and writes it into an array as UTF8 encoded bytes.\r\n\t * @private\r\n\t */\r\n\tfunction stringToUTF8(input, output, start) {\r\n\t\tvar pos = start;\r\n\t\tfor (var i = 0; i<input.length; i++) {\r\n\t\t\tvar charCode = input.charCodeAt(i);\r\n\t\t\t\r\n\t\t\t// Check for a surrogate pair.\r\n\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF) {\r\n\t\t\t\tvar lowCharCode = input.charCodeAt(++i);\r\n\t\t\t\tif (isNaN(lowCharCode)) {\r\n\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UNICODE, [charCode, lowCharCode]));\r\n\t\t\t\t}\r\n\t\t\t\tcharCode = ((charCode - 0xD800)<<10) + (lowCharCode - 0xDC00) + 0x10000;\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (charCode <= 0x7F) {\r\n\t\t\t\toutput[pos++] = charCode;\r\n\t\t\t} else if (charCode <= 0x7FF) {\r\n\t\t\t\toutput[pos++] = charCode>>6  & 0x1F | 0xC0;\r\n\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\r\n\t\t\t} else if (charCode <= 0xFFFF) {    \t\t\t\t    \r\n\t\t\t\toutput[pos++] = charCode>>12 & 0x0F | 0xE0;\r\n\t\t\t\toutput[pos++] = charCode>>6  & 0x3F | 0x80;   \r\n\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;   \r\n\t\t\t} else {\r\n\t\t\t\toutput[pos++] = charCode>>18 & 0x07 | 0xF0;\r\n\t\t\t\toutput[pos++] = charCode>>12 & 0x3F | 0x80;\r\n\t\t\t\toutput[pos++] = charCode>>6  & 0x3F | 0x80;\r\n\t\t\t\toutput[pos++] = charCode     & 0x3F | 0x80;\r\n\t\t\t};\r\n\t\t} \r\n\t\treturn output;\r\n\t}\r\n\t\r\n\tfunction parseUTF8(input, offset, length) {\r\n\t\tvar output = \"\";\r\n\t\tvar utf16;\r\n\t\tvar pos = offset;\r\n\r\n\t\twhile (pos < offset+length)\r\n\t\t{\r\n\t\t\tvar byte1 = input[pos++];\r\n\t\t\tif (byte1 < 128)\r\n\t\t\t\tutf16 = byte1;\r\n\t\t\telse \r\n\t\t\t{\r\n\t\t\t\tvar byte2 = input[pos++]-128;\r\n\t\t\t\tif (byte2 < 0) \r\n\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16),\"\"]));\r\n\t\t\t\tif (byte1 < 0xE0)             // 2 byte character\r\n\t\t\t\t\tutf16 = 64*(byte1-0xC0) + byte2;\r\n\t\t\t\telse \r\n\t\t\t\t{ \r\n\t\t\t\t\tvar byte3 = input[pos++]-128;\r\n\t\t\t\t\tif (byte3 < 0) \r\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16)]));\r\n\t\t\t\t\tif (byte1 < 0xF0)        // 3 byte character\r\n\t\t\t\t\t\tutf16 = 4096*(byte1-0xE0) + 64*byte2 + byte3;\r\n\t\t\t\t\t\t\t\telse\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t   var byte4 = input[pos++]-128;\r\n\t\t\t\t\t\t\t\t   if (byte4 < 0) \r\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\r\n\t\t\t\t\t\t\t\t   if (byte1 < 0xF8)        // 4 byte character \r\n\t\t\t\t\t\t\t\t\t\t   utf16 = 262144*(byte1-0xF0) + 4096*byte2 + 64*byte3 + byte4;\r\n\t\t\t\t\t   else                     // longer encodings are not supported  \r\n\t\t\t\t\t\tthrow new Error(format(ERROR.MALFORMED_UTF, [byte1.toString(16), byte2.toString(16), byte3.toString(16), byte4.toString(16)]));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}  \r\n\r\n\t\t\t\tif (utf16 > 0xFFFF)   // 4 byte character - express as a surrogate pair\r\n\t\t\t\t  {\r\n\t\t\t\t\t utf16 -= 0x10000;\r\n\t\t\t\t\t output += String.fromCharCode(0xD800 + (utf16 >> 10)); // lead character\r\n\t\t\t\t\t utf16 = 0xDC00 + (utf16 & 0x3FF);  // trail character\r\n\t\t\t\t  }\r\n\t\t\toutput += String.fromCharCode(utf16);\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\t\r\n\t/** \r\n\t * Repeat keepalive requests, monitor responses.\r\n\t * @ignore\r\n\t */\r\n\tvar Pinger = function(client, window, keepAliveInterval) { \r\n\t\tthis._client = client;        \t\r\n\t\tthis._window = window;\r\n\t\tthis._keepAliveInterval = keepAliveInterval*1000;     \t\r\n\t\tthis.isReset = false;\r\n\t\t\r\n\t\tvar pingReq = new WireMessage(MESSAGE_TYPE.PINGREQ).encode(); \r\n\t\t\r\n\t\tvar doTimeout = function (pinger) {\r\n\t\t\treturn function () {\r\n\t\t\t\treturn doPing.apply(pinger);\r\n\t\t\t};\r\n\t\t};\r\n\t\t\r\n\t\t/** @ignore */\r\n\t\tvar doPing = function() { \r\n\t\t\tif (!this.isReset) {\r\n\t\t\t\tthis._client._trace(\"Pinger.doPing\", \"Timed out\");\r\n\t\t\t\tthis._client._disconnected( ERROR.PING_TIMEOUT.code , format(ERROR.PING_TIMEOUT));\r\n\t\t\t} else {\r\n\t\t\t\tthis.isReset = false;\r\n\t\t\t\tthis._client._trace(\"Pinger.doPing\", \"send PINGREQ\");\r\n\t\t\t\tthis._client.socket.send(pingReq); \r\n\t\t\t\tthis.timeout = this._window.setTimeout(doTimeout(this), this._keepAliveInterval);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.reset = function() {\r\n\t\t\tthis.isReset = true;\r\n\t\t\tthis._window.clearTimeout(this.timeout);\r\n\t\t\tif (this._keepAliveInterval > 0)\r\n\t\t\t\tthis.timeout = setTimeout(doTimeout(this), this._keepAliveInterval);\r\n\t\t}\r\n\r\n\t\tthis.cancel = function() {\r\n\t\t\tthis._window.clearTimeout(this.timeout);\r\n\t\t}\r\n\t }; \r\n\r\n\t/**\r\n\t * Monitor request completion.\r\n\t * @ignore\r\n\t */\r\n\tvar Timeout = function(client, window, timeoutSeconds, action, args) {\r\n\t\tthis._window = window;\r\n\t\tif (!timeoutSeconds)\r\n\t\t\ttimeoutSeconds = 30;\r\n\t\t\r\n\t\tvar doTimeout = function (action, client, args) {\r\n\t\t\treturn function () {\r\n\t\t\t\treturn action.apply(client, args);\r\n\t\t\t};\r\n\t\t};\r\n\t\tthis.timeout = setTimeout(doTimeout(action, client, args), timeoutSeconds * 1000);\r\n\t\t\r\n\t\tthis.cancel = function() {\r\n\t\t\tthis._window.clearTimeout(this.timeout);\r\n\t\t}\r\n\t}; \r\n\t\r\n\t/*\r\n\t * Internal implementation of the Websockets MQTT V3.1 client.\r\n\t * \r\n\t * @name Paho.MQTT.ClientImpl @constructor \r\n\t * @param {String} host the DNS nameof the webSocket host. \r\n\t * @param {Number} port the port number for that host.\r\n\t * @param {String} clientId the MQ client identifier.\r\n\t */\r\n\tvar ClientImpl = function (uri, host, port, path, clientId) {\r\n\t\t// Check dependencies are satisfied in this browser.\r\n\t\tif (!(\"WebSocket\" in global && global[\"WebSocket\"] !== null)) {\r\n\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"WebSocket\"]));\r\n\t\t}\r\n\t\tif (!(\"localStorage\" in global && global[\"localStorage\"] !== null)) {\r\n\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"localStorage\"]));\r\n\t\t}\r\n\t\tif (!(\"ArrayBuffer\" in global && global[\"ArrayBuffer\"] !== null)) {\r\n\t\t\tthrow new Error(format(ERROR.UNSUPPORTED, [\"ArrayBuffer\"]));\r\n\t\t}\r\n\t\tthis._trace(\"Paho.MQTT.Client\", uri, host, port, path, clientId);\r\n\r\n\t\tthis.host = host;\r\n\t\tthis.port = port;\r\n\t\tthis.path = path;\r\n\t\tthis.uri = uri;\r\n\t\tthis.clientId = clientId;\r\n\r\n\t\t// Local storagekeys are qualified with the following string.\r\n\t\t// The conditional inclusion of path in the key is for backward\r\n\t\t// compatibility to when the path was not configurable and assumed to\r\n\t\t// be /mqtt\r\n\t\tthis._localKey=host+\":\"+port+(path!=\"/mqtt\"?\":\"+path:\"\")+\":\"+clientId+\":\";\r\n\r\n\t\t// Create private instance-only message queue\r\n\t\t// Internal queue of messages to be sent, in sending order. \r\n\t\tthis._msg_queue = [];\r\n\r\n\t\t// Messages we have sent and are expecting a response for, indexed by their respective message ids. \r\n\t\tthis._sentMessages = {};\r\n\r\n\t\t// Messages we have received and acknowleged and are expecting a confirm message for\r\n\t\t// indexed by their respective message ids. \r\n\t\tthis._receivedMessages = {};\r\n\r\n\t\t// Internal list of callbacks to be executed when messages\r\n\t\t// have been successfully sent over web socket, e.g. disconnect\r\n\t\t// when it doesn't have to wait for ACK, just message is dispatched.\r\n\t\tthis._notify_msg_sent = {};\r\n\r\n\t\t// Unique identifier for SEND messages, incrementing\r\n\t\t// counter as messages are sent.\r\n\t\tthis._message_identifier = 1;\r\n\t\t\r\n\t\t// Used to determine the transmission sequence of stored sent messages.\r\n\t\tthis._sequence = 0;\r\n\t\t\r\n\r\n\t\t// Load the local state, if any, from the saved version, only restore state relevant to this client.   \t\r\n\t\tfor (var key in localStorage)\r\n\t\t\tif (   key.indexOf(\"Sent:\"+this._localKey) == 0  \t\t    \r\n\t\t\t\t|| key.indexOf(\"Received:\"+this._localKey) == 0)\r\n\t\t\tthis.restore(key);\r\n\t};\r\n\r\n\t// Messaging Client public instance members. \r\n\tClientImpl.prototype.host;\r\n\tClientImpl.prototype.port;\r\n\tClientImpl.prototype.path;\r\n\tClientImpl.prototype.uri;\r\n\tClientImpl.prototype.clientId;\r\n\r\n\t// Messaging Client private instance members.\r\n\tClientImpl.prototype.socket;\r\n\t/* true once we have received an acknowledgement to a CONNECT packet. */\r\n\tClientImpl.prototype.connected = false;\r\n\t/* The largest message identifier allowed, may not be larger than 2**16 but \r\n\t * if set smaller reduces the maximum number of outbound messages allowed.\r\n\t */ \r\n\tClientImpl.prototype.maxMessageIdentifier = 65536;\r\n\tClientImpl.prototype.connectOptions;\r\n\tClientImpl.prototype.hostIndex;\r\n\tClientImpl.prototype.onConnectionLost;\r\n\tClientImpl.prototype.onMessageDelivered;\r\n\tClientImpl.prototype.onMessageArrived;\r\n\tClientImpl.prototype.traceFunction;\r\n\tClientImpl.prototype._msg_queue = null;\r\n\tClientImpl.prototype._connectTimeout;\r\n\t/* The sendPinger monitors how long we allow before we send data to prove to the server that we are alive. */\r\n\tClientImpl.prototype.sendPinger = null;\r\n\t/* The receivePinger monitors how long we allow before we require evidence that the server is alive. */\r\n\tClientImpl.prototype.receivePinger = null;\r\n\t\r\n\tClientImpl.prototype.receiveBuffer = null;\r\n\t\r\n\tClientImpl.prototype._traceBuffer = null;\r\n\tClientImpl.prototype._MAX_TRACE_ENTRIES = 100;\r\n\r\n\tClientImpl.prototype.connect = function (connectOptions) {\r\n\t\tvar connectOptionsMasked = this._traceMask(connectOptions, \"password\"); \r\n\t\tthis._trace(\"Client.connect\", connectOptionsMasked, this.socket, this.connected);\r\n\t\t\r\n\t\tif (this.connected) \r\n\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\r\n\t\tif (this.socket)\r\n\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"already connected\"]));\r\n\t\t\r\n\t\tthis.connectOptions = connectOptions;\r\n\t\t\r\n\t\tif (connectOptions.uris) {\r\n\t\t\tthis.hostIndex = 0;\r\n\t\t\tthis._doConnect(connectOptions.uris[0]);  \r\n\t\t} else {\r\n\t\t\tthis._doConnect(this.uri);  \t\t\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\tClientImpl.prototype.subscribe = function (filter, subscribeOptions) {\r\n\t\tthis._trace(\"Client.subscribe\", filter, subscribeOptions);\r\n\t\t\t  \r\n\t\tif (!this.connected)\r\n\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\r\n\t\t\r\n\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.SUBSCRIBE);\r\n\t\twireMessage.topics=[filter];\r\n\t\tif (subscribeOptions.qos != undefined)\r\n\t\t\twireMessage.requestedQos = [subscribeOptions.qos];\r\n\t\telse \r\n\t\t\twireMessage.requestedQos = [0];\r\n\t\t\r\n\t\tif (subscribeOptions.onSuccess) {\r\n\t\t\twireMessage.onSuccess = function(grantedQos) {subscribeOptions.onSuccess({invocationContext:subscribeOptions.invocationContext,grantedQos:grantedQos});};\r\n\t\t}\r\n\r\n\t\tif (subscribeOptions.onFailure) {\r\n\t\t\twireMessage.onFailure = function(errorCode) {subscribeOptions.onFailure({invocationContext:subscribeOptions.invocationContext,errorCode:errorCode});};\r\n\t\t}\r\n\r\n\t\tif (subscribeOptions.timeout) {\r\n\t\t\twireMessage.timeOut = new Timeout(this, window, subscribeOptions.timeout, subscribeOptions.onFailure\r\n\t\t\t\t\t, [{invocationContext:subscribeOptions.invocationContext, \r\n\t\t\t\t\t\terrorCode:ERROR.SUBSCRIBE_TIMEOUT.code, \r\n\t\t\t\t\t\terrorMessage:format(ERROR.SUBSCRIBE_TIMEOUT)}]);\r\n\t\t}\r\n\t\t\r\n\t\t// All subscriptions return a SUBACK. \r\n\t\tthis._requires_ack(wireMessage);\r\n\t\tthis._schedule_message(wireMessage);\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype.unsubscribe = function(filter, unsubscribeOptions) {  \r\n\t\tthis._trace(\"Client.unsubscribe\", filter, unsubscribeOptions);\r\n\t\t\r\n\t\tif (!this.connected)\r\n\t\t   throw new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\r\n\t\t\r\n\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.UNSUBSCRIBE);\r\n\t\twireMessage.topics = [filter];\r\n\t\t\r\n\t\tif (unsubscribeOptions.onSuccess) {\r\n\t\t\twireMessage.callback = function() {unsubscribeOptions.onSuccess({invocationContext:unsubscribeOptions.invocationContext});};\r\n\t\t}\r\n\t\tif (unsubscribeOptions.timeout) {\r\n\t\t\twireMessage.timeOut = new Timeout(this, window, unsubscribeOptions.timeout, unsubscribeOptions.onFailure\r\n\t\t\t\t\t, [{invocationContext:unsubscribeOptions.invocationContext,\r\n\t\t\t\t\t\terrorCode:ERROR.UNSUBSCRIBE_TIMEOUT.code,\r\n\t\t\t\t\t\terrorMessage:format(ERROR.UNSUBSCRIBE_TIMEOUT)}]);\r\n\t\t}\r\n\t \r\n\t\t// All unsubscribes return a SUBACK.         \r\n\t\tthis._requires_ack(wireMessage);\r\n\t\tthis._schedule_message(wireMessage);\r\n\t};\r\n\t \r\n\tClientImpl.prototype.send = function (message) {\r\n\t\tthis._trace(\"Client.send\", message);\r\n\r\n\t\tif (!this.connected)\r\n\t\t   throw new Error(format(ERROR.INVALID_STATE, [\"not connected\"]));\r\n\t\t\r\n\t\twireMessage = new WireMessage(MESSAGE_TYPE.PUBLISH);\r\n\t\twireMessage.payloadMessage = message;\r\n\t\t\r\n\t\tif (message.qos > 0)\r\n\t\t\tthis._requires_ack(wireMessage);\r\n\t\telse if (this.onMessageDelivered)\r\n\t\t\tthis._notify_msg_sent[wireMessage] = this.onMessageDelivered(wireMessage.payloadMessage);\r\n\t\tthis._schedule_message(wireMessage);\r\n\t};\r\n\t\r\n\tClientImpl.prototype.disconnect = function () {\r\n\t\tthis._trace(\"Client.disconnect\");\r\n\r\n\t\tif (!this.socket)\r\n\t\t\tthrow new Error(format(ERROR.INVALID_STATE, [\"not connecting or connected\"]));\r\n\t\t\r\n\t\twireMessage = new WireMessage(MESSAGE_TYPE.DISCONNECT);\r\n\r\n\t\t// Run the disconnected call back as soon as the message has been sent,\r\n\t\t// in case of a failure later on in the disconnect processing.\r\n\t\t// as a consequence, the _disconected call back may be run several times.\r\n\t\tthis._notify_msg_sent[wireMessage] = scope(this._disconnected, this);\r\n\r\n\t\tthis._schedule_message(wireMessage);\r\n\t};\r\n\t\r\n\tClientImpl.prototype.getTraceLog = function () {\r\n\t\tif ( this._traceBuffer !== null ) {\r\n\t\t\tthis._trace(\"Client.getTraceLog\", new Date());\r\n\t\t\tthis._trace(\"Client.getTraceLog in flight messages\", this._sentMessages.length);\r\n\t\t\tfor (var key in this._sentMessages)\r\n\t\t\t\tthis._trace(\"_sentMessages \",key, this._sentMessages[key]);\r\n\t\t\tfor (var key in this._receivedMessages)\r\n\t\t\t\tthis._trace(\"_receivedMessages \",key, this._receivedMessages[key]);\r\n\t\t\t\r\n\t\t\treturn this._traceBuffer;\r\n\t\t}\r\n\t};\r\n\t\r\n\tClientImpl.prototype.startTrace = function () {\r\n\t\tif ( this._traceBuffer === null ) {\r\n\t\t\tthis._traceBuffer = [];\r\n\t\t}\r\n\t\tthis._trace(\"Client.startTrace\", new Date(), version);\r\n\t};\r\n\t\r\n\tClientImpl.prototype.stopTrace = function () {\r\n\t\tdelete this._traceBuffer;\r\n\t};\r\n\r\n\tClientImpl.prototype._doConnect = function (wsurl) { \t        \r\n\t\t// When the socket is open, this client will send the CONNECT WireMessage using the saved parameters. \r\n\t\tif (this.connectOptions.useSSL) {\r\n\t\t    var uriParts = wsurl.split(\":\");\r\n\t\t    uriParts[0] = \"wss\";\r\n\t\t    wsurl = uriParts.join(\":\");\r\n\t\t}\r\n\t\tthis.connected = false;\r\n\t\tif (this.connectOptions.mqttVersion < 4) {\r\n\t\t\tthis.socket = new WebSocket(wsurl, [\"mqttv3.1\"]);\r\n\t\t} else {\r\n\t\t\tthis.socket = new WebSocket(wsurl, [\"mqtt\"]);\r\n\t\t}\r\n\t\tthis.socket.binaryType = 'arraybuffer';\r\n\t\t\r\n\t\tthis.socket.onopen = scope(this._on_socket_open, this);\r\n\t\tthis.socket.onmessage = scope(this._on_socket_message, this);\r\n\t\tthis.socket.onerror = scope(this._on_socket_error, this);\r\n\t\tthis.socket.onclose = scope(this._on_socket_close, this);\r\n\t\t\r\n\t\tthis.sendPinger = new Pinger(this, window, this.connectOptions.keepAliveInterval);\r\n\t\tthis.receivePinger = new Pinger(this, window, this.connectOptions.keepAliveInterval);\r\n\t\t\r\n\t\tthis._connectTimeout = new Timeout(this, window, this.connectOptions.timeout, this._disconnected,  [ERROR.CONNECT_TIMEOUT.code, format(ERROR.CONNECT_TIMEOUT)]);\r\n\t};\r\n\r\n\t\r\n\t// Schedule a new message to be sent over the WebSockets\r\n\t// connection. CONNECT messages cause WebSocket connection\r\n\t// to be started. All other messages are queued internally\r\n\t// until this has happened. When WS connection starts, process\r\n\t// all outstanding messages. \r\n\tClientImpl.prototype._schedule_message = function (message) {\r\n\t\tthis._msg_queue.push(message);\r\n\t\t// Process outstanding messages in the queue if we have an  open socket, and have received CONNACK. \r\n\t\tif (this.connected) {\r\n\t\t\tthis._process_queue();\r\n\t\t}\r\n\t};\r\n\r\n\tClientImpl.prototype.store = function(prefix, wireMessage) {\r\n\t\tvar storedMessage = {type:wireMessage.type, messageIdentifier:wireMessage.messageIdentifier, version:1};\r\n\t\t\r\n\t\tswitch(wireMessage.type) {\r\n\t\t  case MESSAGE_TYPE.PUBLISH:\r\n\t\t\t  if(wireMessage.pubRecReceived)\r\n\t\t\t\t  storedMessage.pubRecReceived = true;\r\n\t\t\t  \r\n\t\t\t  // Convert the payload to a hex string.\r\n\t\t\t  storedMessage.payloadMessage = {};\r\n\t\t\t  var hex = \"\";\r\n\t\t\t  var messageBytes = wireMessage.payloadMessage.payloadBytes;\r\n\t\t\t  for (var i=0; i<messageBytes.length; i++) {\r\n\t\t\t\tif (messageBytes[i] <= 0xF)\r\n\t\t\t\t  hex = hex+\"0\"+messageBytes[i].toString(16);\r\n\t\t\t\telse \r\n\t\t\t\t  hex = hex+messageBytes[i].toString(16);\r\n\t\t\t  }\r\n\t\t\t  storedMessage.payloadMessage.payloadHex = hex;\r\n\t\t\t  \r\n\t\t\t  storedMessage.payloadMessage.qos = wireMessage.payloadMessage.qos;\r\n\t\t\t  storedMessage.payloadMessage.destinationName = wireMessage.payloadMessage.destinationName;\r\n\t\t\t  if (wireMessage.payloadMessage.duplicate) \r\n\t\t\t\t  storedMessage.payloadMessage.duplicate = true;\r\n\t\t\t  if (wireMessage.payloadMessage.retained) \r\n\t\t\t\t  storedMessage.payloadMessage.retained = true;\t   \r\n\t\t\t  \r\n\t\t\t  // Add a sequence number to sent messages.\r\n\t\t\t  if ( prefix.indexOf(\"Sent:\") == 0 ) {\r\n\t\t\t\t  if ( wireMessage.sequence === undefined )\r\n\t\t\t\t\t  wireMessage.sequence = ++this._sequence;\r\n\t\t\t\t  storedMessage.sequence = wireMessage.sequence;\r\n\t\t\t  }\r\n\t\t\t  break;    \r\n\t\t\t  \r\n\t\t\tdefault:\r\n\t\t\t\tthrow Error(format(ERROR.INVALID_STORED_DATA, [key, storedMessage]));\r\n\t\t}\r\n\t\tlocalStorage.setItem(prefix+this._localKey+wireMessage.messageIdentifier, JSON.stringify(storedMessage));\r\n\t};\r\n\t\r\n\tClientImpl.prototype.restore = function(key) {    \t\r\n\t\tvar value = localStorage.getItem(key);\r\n\t\tvar storedMessage = JSON.parse(value);\r\n\t\t\r\n\t\tvar wireMessage = new WireMessage(storedMessage.type, storedMessage);\r\n\t\t\r\n\t\tswitch(storedMessage.type) {\r\n\t\t  case MESSAGE_TYPE.PUBLISH:\r\n\t\t\t  // Replace the payload message with a Message object.\r\n\t\t\t  var hex = storedMessage.payloadMessage.payloadHex;\r\n\t\t\t  var buffer = new ArrayBuffer((hex.length)/2);\r\n\t\t\t  var byteStream = new Uint8Array(buffer); \r\n\t\t\t  var i = 0;\r\n\t\t\t  while (hex.length >= 2) { \r\n\t\t\t\t  var x = parseInt(hex.substring(0, 2), 16);\r\n\t\t\t\t  hex = hex.substring(2, hex.length);\r\n\t\t\t\t  byteStream[i++] = x;\r\n\t\t\t  }\r\n\t\t\t  var payloadMessage = new Paho.MQTT.Message(byteStream);\r\n\t\t\t  \r\n\t\t\t  payloadMessage.qos = storedMessage.payloadMessage.qos;\r\n\t\t\t  payloadMessage.destinationName = storedMessage.payloadMessage.destinationName;\r\n\t\t\t  if (storedMessage.payloadMessage.duplicate) \r\n\t\t\t\t  payloadMessage.duplicate = true;\r\n\t\t\t  if (storedMessage.payloadMessage.retained) \r\n\t\t\t\t  payloadMessage.retained = true;\t \r\n\t\t\t  wireMessage.payloadMessage = payloadMessage;\r\n\t\t\t  \r\n\t\t\t  break;    \r\n\t\t\t  \r\n\t\t\tdefault:\r\n\t\t\t  throw Error(format(ERROR.INVALID_STORED_DATA, [key, value]));\r\n\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\tif (key.indexOf(\"Sent:\"+this._localKey) == 0) {\r\n\t\t\twireMessage.payloadMessage.duplicate = true;\r\n\t\t\tthis._sentMessages[wireMessage.messageIdentifier] = wireMessage;    \t\t    \r\n\t\t} else if (key.indexOf(\"Received:\"+this._localKey) == 0) {\r\n\t\t\tthis._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\r\n\t\t}\r\n\t};\r\n\t\r\n\tClientImpl.prototype._process_queue = function () {\r\n\t\tvar message = null;\r\n\t\t// Process messages in order they were added\r\n\t\tvar fifo = this._msg_queue.reverse();\r\n\r\n\t\t// Send all queued messages down socket connection\r\n\t\twhile ((message = fifo.pop())) {\r\n\t\t\tthis._socket_send(message);\r\n\t\t\t// Notify listeners that message was successfully sent\r\n\t\t\tif (this._notify_msg_sent[message]) {\r\n\t\t\t\tthis._notify_msg_sent[message]();\r\n\t\t\t\tdelete this._notify_msg_sent[message];\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Expect an ACK response for this message. Add message to the set of in progress\r\n\t * messages and set an unused identifier in this message.\r\n\t * @ignore\r\n\t */\r\n\tClientImpl.prototype._requires_ack = function (wireMessage) {\r\n\t\tvar messageCount = Object.keys(this._sentMessages).length;\r\n\t\tif (messageCount > this.maxMessageIdentifier)\r\n\t\t\tthrow Error (\"Too many messages:\"+messageCount);\r\n\r\n\t\twhile(this._sentMessages[this._message_identifier] !== undefined) {\r\n\t\t\tthis._message_identifier++;\r\n\t\t}\r\n\t\twireMessage.messageIdentifier = this._message_identifier;\r\n\t\tthis._sentMessages[wireMessage.messageIdentifier] = wireMessage;\r\n\t\tif (wireMessage.type === MESSAGE_TYPE.PUBLISH) {\r\n\t\t\tthis.store(\"Sent:\", wireMessage);\r\n\t\t}\r\n\t\tif (this._message_identifier === this.maxMessageIdentifier) {\r\n\t\t\tthis._message_identifier = 1;\r\n\t\t}\r\n\t};\r\n\r\n\t/** \r\n\t * Called when the underlying websocket has been opened.\r\n\t * @ignore\r\n\t */\r\n\tClientImpl.prototype._on_socket_open = function () {      \r\n\t\t// Create the CONNECT message object.\r\n\t\tvar wireMessage = new WireMessage(MESSAGE_TYPE.CONNECT, this.connectOptions); \r\n\t\twireMessage.clientId = this.clientId;\r\n\t\tthis._socket_send(wireMessage);\r\n\t};\r\n\r\n\t/** \r\n\t * Called when the underlying websocket has received a complete packet.\r\n\t * @ignore\r\n\t */\r\n\tClientImpl.prototype._on_socket_message = function (event) {\r\n\t\tthis._trace(\"Client._on_socket_message\", event.data);\r\n\t\t// Reset the receive ping timer, we now have evidence the server is alive.\r\n\t\tthis.receivePinger.reset();\r\n\t\tvar messages = this._deframeMessages(event.data);\r\n\t\tfor (var i = 0; i < messages.length; i+=1) {\r\n\t\t    this._handleMessage(messages[i]);\r\n\t\t}\r\n\t}\r\n\t\r\n\tClientImpl.prototype._deframeMessages = function(data) {\r\n\t\tvar byteArray = new Uint8Array(data);\r\n\t    if (this.receiveBuffer) {\r\n\t        var newData = new Uint8Array(this.receiveBuffer.length+byteArray.length);\r\n\t        newData.set(this.receiveBuffer);\r\n\t        newData.set(byteArray,this.receiveBuffer.length);\r\n\t        byteArray = newData;\r\n\t        delete this.receiveBuffer;\r\n\t    }\r\n\t\ttry {\r\n\t\t    var offset = 0;\r\n\t\t    var messages = [];\r\n\t\t    while(offset < byteArray.length) {\r\n\t\t        var result = decodeMessage(byteArray,offset);\r\n\t\t        var wireMessage = result[0];\r\n\t\t        offset = result[1];\r\n\t\t        if (wireMessage !== null) {\r\n\t\t            messages.push(wireMessage);\r\n\t\t        } else {\r\n\t\t            break;\r\n\t\t        }\r\n\t\t    }\r\n\t\t    if (offset < byteArray.length) {\r\n\t\t    \tthis.receiveBuffer = byteArray.subarray(offset);\r\n\t\t    }\r\n\t\t} catch (error) {\r\n\t\t\tthis._disconnected(ERROR.INTERNAL_ERROR.code , format(ERROR.INTERNAL_ERROR, [error.message,error.stack.toString()]));\r\n\t\t\treturn;\r\n\t\t}\r\n\t\treturn messages;\r\n\t}\r\n\t\r\n\tClientImpl.prototype._handleMessage = function(wireMessage) {\r\n\t\t\r\n\t\tthis._trace(\"Client._handleMessage\", wireMessage);\r\n\r\n\t\ttry {\r\n\t\t\tswitch(wireMessage.type) {\r\n\t\t\tcase MESSAGE_TYPE.CONNACK:\r\n\t\t\t\tthis._connectTimeout.cancel();\r\n\t\t\t\t\r\n\t\t\t\t// If we have started using clean session then clear up the local state.\r\n\t\t\t\tif (this.connectOptions.cleanSession) {\r\n\t\t\t\t\tfor (var key in this._sentMessages) {\t    \t\t\r\n\t\t\t\t\t\tvar sentMessage = this._sentMessages[key];\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+sentMessage.messageIdentifier);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._sentMessages = {};\r\n\r\n\t\t\t\t\tfor (var key in this._receivedMessages) {\r\n\t\t\t\t\t\tvar receivedMessage = this._receivedMessages[key];\r\n\t\t\t\t\t\tlocalStorage.removeItem(\"Received:\"+this._localKey+receivedMessage.messageIdentifier);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis._receivedMessages = {};\r\n\t\t\t\t}\r\n\t\t\t\t// Client connected and ready for business.\r\n\t\t\t\tif (wireMessage.returnCode === 0) {\r\n\t\t\t\t\tthis.connected = true;\r\n\t\t\t\t\t// Jump to the end of the list of uris and stop looking for a good host.\r\n\t\t\t\t\tif (this.connectOptions.uris)\r\n\t\t\t\t\t\tthis.hostIndex = this.connectOptions.uris.length;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis._disconnected(ERROR.CONNACK_RETURNCODE.code , format(ERROR.CONNACK_RETURNCODE, [wireMessage.returnCode, CONNACK_RC[wireMessage.returnCode]]));\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// Resend messages.\r\n\t\t\t\tvar sequencedMessages = new Array();\r\n\t\t\t\tfor (var msgId in this._sentMessages) {\r\n\t\t\t\t\tif (this._sentMessages.hasOwnProperty(msgId))\r\n\t\t\t\t\t\tsequencedMessages.push(this._sentMessages[msgId]);\r\n\t\t\t\t}\r\n\t\t  \r\n\t\t\t\t// Sort sentMessages into the original sent order.\r\n\t\t\t\tvar sequencedMessages = sequencedMessages.sort(function(a,b) {return a.sequence - b.sequence;} );\r\n\t\t\t\tfor (var i=0, len=sequencedMessages.length; i<len; i++) {\r\n\t\t\t\t\tvar sentMessage = sequencedMessages[i];\r\n\t\t\t\t\tif (sentMessage.type == MESSAGE_TYPE.PUBLISH && sentMessage.pubRecReceived) {\r\n\t\t\t\t\t\tvar pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {messageIdentifier:sentMessage.messageIdentifier});\r\n\t\t\t\t\t\tthis._schedule_message(pubRelMessage);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._schedule_message(sentMessage);\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Execute the connectOptions.onSuccess callback if there is one.\r\n\t\t\t\tif (this.connectOptions.onSuccess) {\r\n\t\t\t\t\tthis.connectOptions.onSuccess({invocationContext:this.connectOptions.invocationContext});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Process all queued messages now that the connection is established. \r\n\t\t\t\tthis._process_queue();\r\n\t\t\t\tbreak;\r\n\t\t\r\n\t\t\tcase MESSAGE_TYPE.PUBLISH:\r\n\t\t\t\tthis._receivePublish(wireMessage);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBACK:\r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t // If this is a re flow of a PUBACK after we have restarted receivedMessage will not exist.\r\n\t\t\t\tif (sentMessage) {\r\n\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+wireMessage.messageIdentifier);\r\n\t\t\t\t\tif (this.onMessageDelivered)\r\n\t\t\t\t\t\tthis.onMessageDelivered(sentMessage.payloadMessage);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.PUBREC:\r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t// If this is a re flow of a PUBREC after we have restarted receivedMessage will not exist.\r\n\t\t\t\tif (sentMessage) {\r\n\t\t\t\t\tsentMessage.pubRecReceived = true;\r\n\t\t\t\t\tvar pubRelMessage = new WireMessage(MESSAGE_TYPE.PUBREL, {messageIdentifier:wireMessage.messageIdentifier});\r\n\t\t\t\t\tthis.store(\"Sent:\", sentMessage);\r\n\t\t\t\t\tthis._schedule_message(pubRelMessage);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.PUBREL:\r\n\t\t\t\tvar receivedMessage = this._receivedMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tlocalStorage.removeItem(\"Received:\"+this._localKey+wireMessage.messageIdentifier);\r\n\t\t\t\t// If this is a re flow of a PUBREL after we have restarted receivedMessage will not exist.\r\n\t\t\t\tif (receivedMessage) {\r\n\t\t\t\t\tthis._receiveMessage(receivedMessage);\r\n\t\t\t\t\tdelete this._receivedMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t}\r\n\t\t\t\t// Always flow PubComp, we may have previously flowed PubComp but the server lost it and restarted.\r\n\t\t\t\tvar pubCompMessage = new WireMessage(MESSAGE_TYPE.PUBCOMP, {messageIdentifier:wireMessage.messageIdentifier});\r\n\t\t\t\tthis._schedule_message(pubCompMessage);                    \r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase MESSAGE_TYPE.PUBCOMP: \r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tlocalStorage.removeItem(\"Sent:\"+this._localKey+wireMessage.messageIdentifier);\r\n\t\t\t\tif (this.onMessageDelivered)\r\n\t\t\t\t\tthis.onMessageDelivered(sentMessage.payloadMessage);\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.SUBACK:\r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tif (sentMessage) {\r\n\t\t\t\t\tif(sentMessage.timeOut)\r\n\t\t\t\t\t\tsentMessage.timeOut.cancel();\r\n\t\t\t\t\t// This will need to be fixed when we add multiple topic support\r\n          \t\t\tif (wireMessage.returnCode[0] === 0x80) {\r\n\t\t\t\t\t\tif (sentMessage.onFailure) {\r\n\t\t\t\t\t\t\tsentMessage.onFailure(wireMessage.returnCode);\r\n\t\t\t\t\t\t} \r\n\t\t\t\t\t} else if (sentMessage.onSuccess) {\r\n\t\t\t\t\t\tsentMessage.onSuccess(wireMessage.returnCode);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.UNSUBACK:\r\n\t\t\t\tvar sentMessage = this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\tif (sentMessage) { \r\n\t\t\t\t\tif (sentMessage.timeOut)\r\n\t\t\t\t\t\tsentMessage.timeOut.cancel();\r\n\t\t\t\t\tif (sentMessage.callback) {\r\n\t\t\t\t\t\tsentMessage.callback();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdelete this._sentMessages[wireMessage.messageIdentifier];\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.PINGRESP:\r\n\t\t\t\t/* The sendPinger or receivePinger may have sent a ping, the receivePinger has already been reset. */\r\n\t\t\t\tthis.sendPinger.reset();\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase MESSAGE_TYPE.DISCONNECT:\r\n\t\t\t\t// Clients do not expect to receive disconnect packets.\r\n\t\t\t\tthis._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code , format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthis._disconnected(ERROR.INVALID_MQTT_MESSAGE_TYPE.code , format(ERROR.INVALID_MQTT_MESSAGE_TYPE, [wireMessage.type]));\r\n\t\t\t};\r\n\t\t} catch (error) {\r\n\t\t\tthis._disconnected(ERROR.INTERNAL_ERROR.code , format(ERROR.INTERNAL_ERROR, [error.message,error.stack.toString()]));\r\n\t\t\treturn;\r\n\t\t}\r\n\t};\r\n\t\r\n\t/** @ignore */\r\n\tClientImpl.prototype._on_socket_error = function (error) {\r\n\t\tthis._disconnected(ERROR.SOCKET_ERROR.code , format(ERROR.SOCKET_ERROR, [error.data]));\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype._on_socket_close = function () {\r\n\t\tthis._disconnected(ERROR.SOCKET_CLOSE.code , format(ERROR.SOCKET_CLOSE));\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype._socket_send = function (wireMessage) {\r\n\t\t\r\n\t\tif (wireMessage.type == 1) {\r\n\t\t\tvar wireMessageMasked = this._traceMask(wireMessage, \"password\"); \r\n\t\t\tthis._trace(\"Client._socket_send\", wireMessageMasked);\r\n\t\t}\r\n\t\telse this._trace(\"Client._socket_send\", wireMessage);\r\n\t\t\r\n\t\tthis.socket.send(wireMessage.encode());\r\n\t\t/* We have proved to the server we are alive. */\r\n\t\tthis.sendPinger.reset();\r\n\t};\r\n\t\r\n\t/** @ignore */\r\n\tClientImpl.prototype._receivePublish = function (wireMessage) {\r\n\t\tswitch(wireMessage.payloadMessage.qos) {\r\n\t\t\tcase \"undefined\":\r\n\t\t\tcase 0:\r\n\t\t\t\tthis._receiveMessage(wireMessage);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\tvar pubAckMessage = new WireMessage(MESSAGE_TYPE.PUBACK, {messageIdentifier:wireMessage.messageIdentifier});\r\n\t\t\t\tthis._schedule_message(pubAckMessage);\r\n\t\t\t\tthis._receiveMessage(wireMessage);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\tthis._receivedMessages[wireMessage.messageIdentifier] = wireMessage;\r\n\t\t\t\tthis.store(\"Received:\", wireMessage);\r\n\t\t\t\tvar pubRecMessage = new WireMessage(MESSAGE_TYPE.PUBREC, {messageIdentifier:wireMessage.messageIdentifier});\r\n\t\t\t\tthis._schedule_message(pubRecMessage);\r\n\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\tthrow Error(\"Invaild qos=\"+wireMmessage.payloadMessage.qos);\r\n\t\t};\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype._receiveMessage = function (wireMessage) {\r\n\t\tif (this.onMessageArrived) {\r\n\t\t\tthis.onMessageArrived(wireMessage.payloadMessage);\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * Client has disconnected either at its own request or because the server\r\n\t * or network disconnected it. Remove all non-durable state.\r\n\t * @param {errorCode} [number] the error number.\r\n\t * @param {errorText} [string] the error text.\r\n\t * @ignore\r\n\t */\r\n\tClientImpl.prototype._disconnected = function (errorCode, errorText) {\r\n\t\tthis._trace(\"Client._disconnected\", errorCode, errorText);\r\n\t\t\r\n\t\tthis.sendPinger.cancel();\r\n\t\tthis.receivePinger.cancel();\r\n\t\tif (this._connectTimeout)\r\n\t\t\tthis._connectTimeout.cancel();\r\n\t\t// Clear message buffers.\r\n\t\tthis._msg_queue = [];\r\n\t\tthis._notify_msg_sent = {};\r\n\t   \r\n\t\tif (this.socket) {\r\n\t\t\t// Cancel all socket callbacks so that they cannot be driven again by this socket.\r\n\t\t\tthis.socket.onopen = null;\r\n\t\t\tthis.socket.onmessage = null;\r\n\t\t\tthis.socket.onerror = null;\r\n\t\t\tthis.socket.onclose = null;\r\n\t\t\tif (this.socket.readyState === 1)\r\n\t\t\t\tthis.socket.close();\r\n\t\t\tdelete this.socket;           \r\n\t\t}\r\n\t\t\r\n\t\tif (this.connectOptions.uris && this.hostIndex < this.connectOptions.uris.length-1) {\r\n\t\t\t// Try the next host.\r\n\t\t\tthis.hostIndex++;\r\n\t\t\tthis._doConnect(this.connectOptions.uris[this.hostIndex]);\r\n\t\t\r\n\t\t} else {\r\n\t\t\r\n\t\t\tif (errorCode === undefined) {\r\n\t\t\t\terrorCode = ERROR.OK.code;\r\n\t\t\t\terrorText = format(ERROR.OK);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// Run any application callbacks last as they may attempt to reconnect and hence create a new socket.\r\n\t\t\tif (this.connected) {\r\n\t\t\t\tthis.connected = false;\r\n\t\t\t\t// Execute the connectionLostCallback if there is one, and we were connected.       \r\n\t\t\t\tif (this.onConnectionLost)\r\n\t\t\t\t\tthis.onConnectionLost({errorCode:errorCode, errorMessage:errorText});      \t\r\n\t\t\t} else {\r\n\t\t\t\t// Otherwise we never had a connection, so indicate that the connect has failed.\r\n\t\t\t\tif (this.connectOptions.mqttVersion === 4 && this.connectOptions.mqttVersionExplicit === false) {\r\n\t\t\t\t\tthis._trace(\"Failed to connect V4, dropping back to V3\")\r\n\t\t\t\t\tthis.connectOptions.mqttVersion = 3;\r\n\t\t\t\t\tif (this.connectOptions.uris) {\r\n\t\t\t\t\t\tthis.hostIndex = 0;\r\n\t\t\t\t\t\tthis._doConnect(this.connectOptions.uris[0]);  \r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis._doConnect(this.uri);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t} else if(this.connectOptions.onFailure) {\r\n\t\t\t\t\tthis.connectOptions.onFailure({invocationContext:this.connectOptions.invocationContext, errorCode:errorCode, errorMessage:errorText});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\t/** @ignore */\r\n\tClientImpl.prototype._trace = function () {\r\n\t\t// Pass trace message back to client's callback function\r\n\t\tif (this.traceFunction) {\r\n\t\t\tfor (var i in arguments)\r\n\t\t\t{\t\r\n\t\t\t\tif (typeof arguments[i] !== \"undefined\")\r\n\t\t\t\t\targuments[i] = JSON.stringify(arguments[i]);\r\n\t\t\t}\r\n\t\t\tvar record = Array.prototype.slice.call(arguments).join(\"\");\r\n\t\t\tthis.traceFunction ({severity: \"Debug\", message: record\t});\r\n\t\t}\r\n\r\n\t\t//buffer style trace\r\n\t\tif ( this._traceBuffer !== null ) {  \r\n\t\t\tfor (var i = 0, max = arguments.length; i < max; i++) {\r\n\t\t\t\tif ( this._traceBuffer.length == this._MAX_TRACE_ENTRIES ) {    \r\n\t\t\t\t\tthis._traceBuffer.shift();              \r\n\t\t\t\t}\r\n\t\t\t\tif (i === 0) this._traceBuffer.push(arguments[i]);\r\n\t\t\t\telse if (typeof arguments[i] === \"undefined\" ) this._traceBuffer.push(arguments[i]);\r\n\t\t\t\telse this._traceBuffer.push(\"  \"+JSON.stringify(arguments[i]));\r\n\t\t   };\r\n\t\t};\r\n\t};\r\n\t\r\n\t/** @ignore */\r\n\tClientImpl.prototype._traceMask = function (traceObject, masked) {\r\n\t\tvar traceObjectMasked = {};\r\n\t\tfor (var attr in traceObject) {\r\n\t\t\tif (traceObject.hasOwnProperty(attr)) {\r\n\t\t\t\tif (attr == masked) \r\n\t\t\t\t\ttraceObjectMasked[attr] = \"******\";\r\n\t\t\t\telse\r\n\t\t\t\t\ttraceObjectMasked[attr] = traceObject[attr];\r\n\t\t\t} \r\n\t\t}\r\n\t\treturn traceObjectMasked;\r\n\t};\r\n\r\n\t// ------------------------------------------------------------------------\r\n\t// Public Programming interface.\r\n\t// ------------------------------------------------------------------------\r\n\t\r\n\t/** \r\n\t * The JavaScript application communicates to the server using a {@link Paho.MQTT.Client} object. \r\n\t * <p>\r\n\t * Most applications will create just one Client object and then call its connect() method,\r\n\t * however applications can create more than one Client object if they wish. \r\n\t * In this case the combination of host, port and clientId attributes must be different for each Client object.\r\n\t * <p>\r\n\t * The send, subscribe and unsubscribe methods are implemented as asynchronous JavaScript methods \r\n\t * (even though the underlying protocol exchange might be synchronous in nature). \r\n\t * This means they signal their completion by calling back to the application, \r\n\t * via Success or Failure callback functions provided by the application on the method in question. \r\n\t * Such callbacks are called at most once per method invocation and do not persist beyond the lifetime \r\n\t * of the script that made the invocation.\r\n\t * <p>\r\n\t * In contrast there are some callback functions, most notably <i>onMessageArrived</i>, \r\n\t * that are defined on the {@link Paho.MQTT.Client} object.  \r\n\t * These may get called multiple times, and aren't directly related to specific method invocations made by the client. \r\n\t *\r\n\t * @name Paho.MQTT.Client    \r\n\t * \r\n\t * @constructor\r\n\t *  \r\n\t * @param {string} host - the address of the messaging server, as a fully qualified WebSocket URI, as a DNS name or dotted decimal IP address.\r\n\t * @param {number} port - the port number to connect to - only required if host is not a URI\r\n\t * @param {string} path - the path on the host to connect to - only used if host is not a URI. Default: '/mqtt'.\r\n\t * @param {string} clientId - the Messaging client identifier, between 1 and 23 characters in length.\r\n\t * \r\n\t * @property {string} host - <i>read only</i> the server's DNS hostname or dotted decimal IP address.\r\n\t * @property {number} port - <i>read only</i> the server's port.\r\n\t * @property {string} path - <i>read only</i> the server's path.\r\n\t * @property {string} clientId - <i>read only</i> used when connecting to the server.\r\n\t * @property {function} onConnectionLost - called when a connection has been lost. \r\n\t *                            after a connect() method has succeeded.\r\n\t *                            Establish the call back used when a connection has been lost. The connection may be\r\n\t *                            lost because the client initiates a disconnect or because the server or network \r\n\t *                            cause the client to be disconnected. The disconnect call back may be called without \r\n\t *                            the connectionComplete call back being invoked if, for example the client fails to \r\n\t *                            connect.\r\n\t *                            A single response object parameter is passed to the onConnectionLost callback containing the following fields:\r\n\t *                            <ol>   \r\n\t *                            <li>errorCode\r\n\t *                            <li>errorMessage       \r\n\t *                            </ol>\r\n\t * @property {function} onMessageDelivered called when a message has been delivered. \r\n\t *                            All processing that this Client will ever do has been completed. So, for example,\r\n\t *                            in the case of a Qos=2 message sent by this client, the PubComp flow has been received from the server\r\n\t *                            and the message has been removed from persistent storage before this callback is invoked. \r\n\t *                            Parameters passed to the onMessageDelivered callback are:\r\n\t *                            <ol>   \r\n\t *                            <li>{@link Paho.MQTT.Message} that was delivered.\r\n\t *                            </ol>    \r\n\t * @property {function} onMessageArrived called when a message has arrived in this Paho.MQTT.client. \r\n\t *                            Parameters passed to the onMessageArrived callback are:\r\n\t *                            <ol>   \r\n\t *                            <li>{@link Paho.MQTT.Message} that has arrived.\r\n\t *                            </ol>    \r\n\t */\r\n\tvar Client = function (host, port, path, clientId) {\r\n\t    \r\n\t    var uri;\r\n\t    \r\n\t\tif (typeof host !== \"string\")\r\n\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof host, \"host\"]));\r\n\t    \r\n\t    if (arguments.length == 2) {\r\n\t        // host: must be full ws:// uri\r\n\t        // port: clientId\r\n\t        clientId = port;\r\n\t        uri = host;\r\n\t        var match = uri.match(/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/);\r\n\t        if (match) {\r\n\t            host = match[4]||match[2];\r\n\t            port = parseInt(match[7]);\r\n\t            path = match[8];\r\n\t        } else {\r\n\t            throw new Error(format(ERROR.INVALID_ARGUMENT,[host,\"host\"]));\r\n\t        }\r\n\t    } else {\r\n\t        if (arguments.length == 3) {\r\n\t\t\t\tclientId = path;\r\n\t\t\t\tpath = \"/mqtt\";\r\n\t\t\t}\r\n\t\t\tif (typeof port !== \"number\" || port < 0)\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof port, \"port\"]));\r\n\t\t\tif (typeof path !== \"string\")\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof path, \"path\"]));\r\n\t\t\t\r\n\t\t\tvar ipv6AddSBracket = (host.indexOf(\":\") != -1 && host.slice(0,1) != \"[\" && host.slice(-1) != \"]\");\r\n\t\t\turi = \"ws://\"+(ipv6AddSBracket?\"[\"+host+\"]\":host)+\":\"+port+path;\r\n\t\t}\r\n\r\n\t\tvar clientIdLength = 0;\r\n\t\tfor (var i = 0; i<clientId.length; i++) {\r\n\t\t\tvar charCode = clientId.charCodeAt(i);                   \r\n\t\t\tif (0xD800 <= charCode && charCode <= 0xDBFF)  {    \t\t\t\r\n\t\t\t\t i++; // Surrogate pair.\r\n\t\t\t}   \t\t   \r\n\t\t\tclientIdLength++;\r\n\t\t}     \t   \t\r\n\t\tif (typeof clientId !== \"string\" || clientIdLength > 65535)\r\n\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [clientId, \"clientId\"])); \r\n\t\t\r\n\t\tvar client = new ClientImpl(uri, host, port, path, clientId);\r\n\t\tthis._getHost =  function() { return host; };\r\n\t\tthis._setHost = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\t\t\t\r\n\t\tthis._getPort = function() { return port; };\r\n\t\tthis._setPort = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\r\n\t\tthis._getPath = function() { return path; };\r\n\t\tthis._setPath = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\r\n\t\tthis._getURI = function() { return uri; };\r\n\t\tthis._setURI = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\t\t\r\n\t\tthis._getClientId = function() { return client.clientId; };\r\n\t\tthis._setClientId = function() { throw new Error(format(ERROR.UNSUPPORTED_OPERATION)); };\r\n\t\t\r\n\t\tthis._getOnConnectionLost = function() { return client.onConnectionLost; };\r\n\t\tthis._setOnConnectionLost = function(newOnConnectionLost) { \r\n\t\t\tif (typeof newOnConnectionLost === \"function\")\r\n\t\t\t\tclient.onConnectionLost = newOnConnectionLost;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnConnectionLost, \"onConnectionLost\"]));\r\n\t\t};\r\n\r\n\t\tthis._getOnMessageDelivered = function() { return client.onMessageDelivered; };\r\n\t\tthis._setOnMessageDelivered = function(newOnMessageDelivered) { \r\n\t\t\tif (typeof newOnMessageDelivered === \"function\")\r\n\t\t\t\tclient.onMessageDelivered = newOnMessageDelivered;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageDelivered, \"onMessageDelivered\"]));\r\n\t\t};\r\n\t   \r\n\t\tthis._getOnMessageArrived = function() { return client.onMessageArrived; };\r\n\t\tthis._setOnMessageArrived = function(newOnMessageArrived) { \r\n\t\t\tif (typeof newOnMessageArrived === \"function\")\r\n\t\t\t\tclient.onMessageArrived = newOnMessageArrived;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof newOnMessageArrived, \"onMessageArrived\"]));\r\n\t\t};\r\n\r\n\t\tthis._getTrace = function() { return client.traceFunction; };\r\n\t\tthis._setTrace = function(trace) {\r\n\t\t\tif(typeof trace === \"function\"){\r\n\t\t\t\tclient.traceFunction = trace;\r\n\t\t\t}else{\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof trace, \"onTrace\"]));\r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t/** \r\n\t\t * Connect this Messaging client to its server. \r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#connect\r\n\t\t * @function\r\n\t\t * @param {Object} connectOptions - attributes used with the connection. \r\n\t\t * @param {number} connectOptions.timeout - If the connect has not succeeded within this \r\n\t\t *                    number of seconds, it is deemed to have failed.\r\n\t\t *                    The default is 30 seconds.\r\n\t\t * @param {string} connectOptions.userName - Authentication username for this connection.\r\n\t\t * @param {string} connectOptions.password - Authentication password for this connection.\r\n\t\t * @param {Paho.MQTT.Message} connectOptions.willMessage - sent by the server when the client\r\n\t\t *                    disconnects abnormally.\r\n\t\t * @param {Number} connectOptions.keepAliveInterval - the server disconnects this client if\r\n\t\t *                    there is no activity for this number of seconds.\r\n\t\t *                    The default value of 60 seconds is assumed if not set.\r\n\t\t * @param {boolean} connectOptions.cleanSession - if true(default) the client and server \r\n\t\t *                    persistent state is deleted on successful connect.\r\n\t\t * @param {boolean} connectOptions.useSSL - if present and true, use an SSL Websocket connection.\r\n\t\t * @param {object} connectOptions.invocationContext - passed to the onSuccess callback or onFailure callback.\r\n\t\t * @param {function} connectOptions.onSuccess - called when the connect acknowledgement \r\n\t\t *                    has been received from the server.\r\n\t\t * A single response object parameter is passed to the onSuccess callback containing the following fields:\r\n\t\t * <ol>\r\n\t\t * <li>invocationContext as passed in to the onSuccess method in the connectOptions.       \r\n\t\t * </ol>\r\n\t\t * @config {function} [onFailure] called when the connect request has failed or timed out.\r\n\t\t * A single response object parameter is passed to the onFailure callback containing the following fields:\r\n\t\t * <ol>\r\n\t\t * <li>invocationContext as passed in to the onFailure method in the connectOptions.       \r\n\t\t * <li>errorCode a number indicating the nature of the error.\r\n\t\t * <li>errorMessage text describing the error.      \r\n\t\t * </ol>\r\n\t\t * @config {Array} [hosts] If present this contains either a set of hostnames or fully qualified\r\n\t\t * WebSocket URIs (ws://example.com:1883/mqtt), that are tried in order in place \r\n\t\t * of the host and port paramater on the construtor. The hosts are tried one at at time in order until\r\n\t\t * one of then succeeds.\r\n\t\t * @config {Array} [ports] If present the set of ports matching the hosts. If hosts contains URIs, this property\r\n\t\t * is not used.\r\n\t\t * @throws {InvalidState} if the client is not in disconnected state. The client must have received connectionLost\r\n\t\t * or disconnected before calling connect for a second or subsequent time.\r\n\t\t */\r\n\t\tthis.connect = function (connectOptions) {\r\n\t\t\tconnectOptions = connectOptions || {} ;\r\n\t\t\tvalidate(connectOptions,  {timeout:\"number\",\r\n\t\t\t\t\t\t\t\t\t   userName:\"string\", \r\n\t\t\t\t\t\t\t\t\t   password:\"string\", \r\n\t\t\t\t\t\t\t\t\t   willMessage:\"object\", \r\n\t\t\t\t\t\t\t\t\t   keepAliveInterval:\"number\", \r\n\t\t\t\t\t\t\t\t\t   cleanSession:\"boolean\", \r\n\t\t\t\t\t\t\t\t\t   useSSL:\"boolean\",\r\n\t\t\t\t\t\t\t\t\t   invocationContext:\"object\", \r\n\t\t\t\t\t\t\t\t\t   onSuccess:\"function\", \r\n\t\t\t\t\t\t\t\t\t   onFailure:\"function\",\r\n\t\t\t\t\t\t\t\t\t   hosts:\"object\",\r\n\t\t\t\t\t\t\t\t\t   ports:\"object\",\r\n\t\t\t\t\t\t\t\t\t   mqttVersion:\"number\"});\r\n\t\t\t\r\n\t\t\t// If no keep alive interval is set, assume 60 seconds.\r\n\t\t\tif (connectOptions.keepAliveInterval === undefined)\r\n\t\t\t\tconnectOptions.keepAliveInterval = 60;\r\n\r\n\t\t\tif (connectOptions.mqttVersion > 4 || connectOptions.mqttVersion < 3) {\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.mqttVersion, \"connectOptions.mqttVersion\"]));\r\n\t\t\t}\r\n\r\n\t\t\tif (connectOptions.mqttVersion === undefined) {\r\n\t\t\t\tconnectOptions.mqttVersionExplicit = false;\r\n\t\t\t\tconnectOptions.mqttVersion = 4;\r\n\t\t\t} else {\r\n\t\t\t\tconnectOptions.mqttVersionExplicit = true;\r\n\t\t\t}\r\n\r\n\t\t\t//Check that if password is set, so is username\r\n\t\t\tif (connectOptions.password === undefined && connectOptions.userName !== undefined)\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.password, \"connectOptions.password\"]))\r\n\r\n\t\t\tif (connectOptions.willMessage) {\r\n\t\t\t\tif (!(connectOptions.willMessage instanceof Message))\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [connectOptions.willMessage, \"connectOptions.willMessage\"]));\r\n\t\t\t\t// The will message must have a payload that can be represented as a string.\r\n\t\t\t\t// Cause the willMessage to throw an exception if this is not the case.\r\n\t\t\t\tconnectOptions.willMessage.stringPayload;\r\n\t\t\t\t\r\n\t\t\t\tif (typeof connectOptions.willMessage.destinationName === \"undefined\")\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.willMessage.destinationName, \"connectOptions.willMessage.destinationName\"]));\r\n\t\t\t}\r\n\t\t\tif (typeof connectOptions.cleanSession === \"undefined\")\r\n\t\t\t\tconnectOptions.cleanSession = true;\r\n\t\t\tif (connectOptions.hosts) {\r\n\t\t\t    \r\n\t\t\t\tif (!(connectOptions.hosts instanceof Array) )\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\r\n\t\t\t\tif (connectOptions.hosts.length <1 )\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts, \"connectOptions.hosts\"]));\r\n\t\t\t\t\r\n\t\t\t\tvar usingURIs = false;\r\n\t\t\t\tfor (var i = 0; i<connectOptions.hosts.length; i++) {\r\n\t\t\t\t\tif (typeof connectOptions.hosts[i] !== \"string\")\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\r\n\t\t\t\t\tif (/^(wss?):\\/\\/((\\[(.+)\\])|([^\\/]+?))(:(\\d+))?(\\/.*)$/.test(connectOptions.hosts[i])) {\r\n\t\t\t\t\t\tif (i == 0) {\r\n\t\t\t\t\t\t\tusingURIs = true;\r\n\t\t\t\t\t\t} else if (!usingURIs) {\r\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if (usingURIs) {\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.hosts[i], \"connectOptions.hosts[\"+i+\"]\"]));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (!usingURIs) {\r\n\t\t\t\t\tif (!connectOptions.ports)\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\r\n\t\t\t\t\tif (!(connectOptions.ports instanceof Array) )\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\r\n\t\t\t\t\tif (connectOptions.hosts.length != connectOptions.ports.length)\r\n\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [connectOptions.ports, \"connectOptions.ports\"]));\r\n\t\t\t\t\t\r\n\t\t\t\t\tconnectOptions.uris = [];\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (var i = 0; i<connectOptions.hosts.length; i++) {\r\n\t\t\t\t\t\tif (typeof connectOptions.ports[i] !== \"number\" || connectOptions.ports[i] < 0)\r\n\t\t\t\t\t\t\tthrow new Error(format(ERROR.INVALID_TYPE, [typeof connectOptions.ports[i], \"connectOptions.ports[\"+i+\"]\"]));\r\n\t\t\t\t\t\tvar host = connectOptions.hosts[i];\r\n\t\t\t\t\t\tvar port = connectOptions.ports[i];\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar ipv6 = (host.indexOf(\":\") != -1);\r\n\t\t\t\t\t\turi = \"ws://\"+(ipv6?\"[\"+host+\"]\":host)+\":\"+port+path;\r\n\t\t\t\t\t\tconnectOptions.uris.push(uri);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tconnectOptions.uris = connectOptions.hosts;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tclient.connect(connectOptions);\r\n\t\t};\r\n\t \r\n\t\t/** \r\n\t\t * Subscribe for messages, request receipt of a copy of messages sent to the destinations described by the filter.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#subscribe\r\n\t\t * @function\r\n\t\t * @param {string} filter describing the destinations to receive messages from.\r\n\t\t * <br>\r\n\t\t * @param {object} subscribeOptions - used to control the subscription\r\n\t\t *\r\n\t\t * @param {number} subscribeOptions.qos - the maiximum qos of any publications sent \r\n\t\t *                                  as a result of making this subscription.\r\n\t\t * @param {object} subscribeOptions.invocationContext - passed to the onSuccess callback \r\n\t\t *                                  or onFailure callback.\r\n\t\t * @param {function} subscribeOptions.onSuccess - called when the subscribe acknowledgement\r\n\t\t *                                  has been received from the server.\r\n\t\t *                                  A single response object parameter is passed to the onSuccess callback containing the following fields:\r\n\t\t *                                  <ol>\r\n\t\t *                                  <li>invocationContext if set in the subscribeOptions.       \r\n\t\t *                                  </ol>\r\n\t\t * @param {function} subscribeOptions.onFailure - called when the subscribe request has failed or timed out.\r\n\t\t *                                  A single response object parameter is passed to the onFailure callback containing the following fields:\r\n\t\t *                                  <ol>\r\n\t\t *                                  <li>invocationContext - if set in the subscribeOptions.       \r\n\t\t *                                  <li>errorCode - a number indicating the nature of the error.\r\n\t\t *                                  <li>errorMessage - text describing the error.      \r\n\t\t *                                  </ol>\r\n\t\t * @param {number} subscribeOptions.timeout - which, if present, determines the number of\r\n\t\t *                                  seconds after which the onFailure calback is called.\r\n\t\t *                                  The presence of a timeout does not prevent the onSuccess\r\n\t\t *                                  callback from being called when the subscribe completes.         \r\n\t\t * @throws {InvalidState} if the client is not in connected state.\r\n\t\t */\r\n\t\tthis.subscribe = function (filter, subscribeOptions) {\r\n\t\t\tif (typeof filter !== \"string\")\r\n\t\t\t\tthrow new Error(\"Invalid argument:\"+filter);\r\n\t\t\tsubscribeOptions = subscribeOptions || {} ;\r\n\t\t\tvalidate(subscribeOptions,  {qos:\"number\", \r\n\t\t\t\t\t\t\t\t\t\t invocationContext:\"object\", \r\n\t\t\t\t\t\t\t\t\t\t onSuccess:\"function\", \r\n\t\t\t\t\t\t\t\t\t\t onFailure:\"function\",\r\n\t\t\t\t\t\t\t\t\t\t timeout:\"number\"\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\tif (subscribeOptions.timeout && !subscribeOptions.onFailure)\r\n\t\t\t\tthrow new Error(\"subscribeOptions.timeout specified with no onFailure callback.\");\r\n\t\t\tif (typeof subscribeOptions.qos !== \"undefined\" \r\n\t\t\t\t&& !(subscribeOptions.qos === 0 || subscribeOptions.qos === 1 || subscribeOptions.qos === 2 ))\r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [subscribeOptions.qos, \"subscribeOptions.qos\"]));\r\n\t\t\tclient.subscribe(filter, subscribeOptions);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Unsubscribe for messages, stop receiving messages sent to destinations described by the filter.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#unsubscribe\r\n\t\t * @function\r\n\t\t * @param {string} filter - describing the destinations to receive messages from.\r\n\t\t * @param {object} unsubscribeOptions - used to control the subscription\r\n\t\t * @param {object} unsubscribeOptions.invocationContext - passed to the onSuccess callback \r\n\t\t                                      or onFailure callback.\r\n\t\t * @param {function} unsubscribeOptions.onSuccess - called when the unsubscribe acknowledgement has been received from the server.\r\n\t\t *                                    A single response object parameter is passed to the \r\n\t\t *                                    onSuccess callback containing the following fields:\r\n\t\t *                                    <ol>\r\n\t\t *                                    <li>invocationContext - if set in the unsubscribeOptions.     \r\n\t\t *                                    </ol>\r\n\t\t * @param {function} unsubscribeOptions.onFailure called when the unsubscribe request has failed or timed out.\r\n\t\t *                                    A single response object parameter is passed to the onFailure callback containing the following fields:\r\n\t\t *                                    <ol>\r\n\t\t *                                    <li>invocationContext - if set in the unsubscribeOptions.       \r\n\t\t *                                    <li>errorCode - a number indicating the nature of the error.\r\n\t\t *                                    <li>errorMessage - text describing the error.      \r\n\t\t *                                    </ol>\r\n\t\t * @param {number} unsubscribeOptions.timeout - which, if present, determines the number of seconds\r\n\t\t *                                    after which the onFailure callback is called. The presence of\r\n\t\t *                                    a timeout does not prevent the onSuccess callback from being\r\n\t\t *                                    called when the unsubscribe completes\r\n\t\t * @throws {InvalidState} if the client is not in connected state.\r\n\t\t */\r\n\t\tthis.unsubscribe = function (filter, unsubscribeOptions) {\r\n\t\t\tif (typeof filter !== \"string\")\r\n\t\t\t\tthrow new Error(\"Invalid argument:\"+filter);\r\n\t\t\tunsubscribeOptions = unsubscribeOptions || {} ;\r\n\t\t\tvalidate(unsubscribeOptions,  {invocationContext:\"object\", \r\n\t\t\t\t\t\t\t\t\t\t   onSuccess:\"function\", \r\n\t\t\t\t\t\t\t\t\t\t   onFailure:\"function\",\r\n\t\t\t\t\t\t\t\t\t\t   timeout:\"number\"\r\n\t\t\t\t\t\t\t\t\t\t  });\r\n\t\t\tif (unsubscribeOptions.timeout && !unsubscribeOptions.onFailure)\r\n\t\t\t\tthrow new Error(\"unsubscribeOptions.timeout specified with no onFailure callback.\");\r\n\t\t\tclient.unsubscribe(filter, unsubscribeOptions);\r\n\t\t};\r\n\r\n\t\t/**\r\n\t\t * Send a message to the consumers of the destination in the Message.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#send\r\n\t\t * @function \r\n\t\t * @param {string|Paho.MQTT.Message} topic - <b>mandatory</b> The name of the destination to which the message is to be sent. \r\n\t\t * \t\t\t\t\t   - If it is the only parameter, used as Paho.MQTT.Message object.\r\n\t\t * @param {String|ArrayBuffer} payload - The message data to be sent. \r\n\t\t * @param {number} qos The Quality of Service used to deliver the message.\r\n\t\t * \t\t<dl>\r\n\t\t * \t\t\t<dt>0 Best effort (default).\r\n\t\t *     \t\t\t<dt>1 At least once.\r\n\t\t *     \t\t\t<dt>2 Exactly once.     \r\n\t\t * \t\t</dl>\r\n\t\t * @param {Boolean} retained If true, the message is to be retained by the server and delivered \r\n\t\t *                     to both current and future subscriptions.\r\n\t\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages. \r\n\t\t *                     A received message has the retained boolean set to true if the message was published \r\n\t\t *                     with the retained boolean set to true\r\n\t\t *                     and the subscrption was made after the message has been published. \r\n\t\t * @throws {InvalidState} if the client is not connected.\r\n\t\t */   \r\n\t\tthis.send = function (topic,payload,qos,retained) {   \r\n\t\t\tvar message ;  \r\n\t\t\t\r\n\t\t\tif(arguments.length == 0){\r\n\t\t\t\tthrow new Error(\"Invalid argument.\"+\"length\");\r\n\r\n\t\t\t}else if(arguments.length == 1) {\r\n\r\n\t\t\t\tif (!(topic instanceof Message) && (typeof topic !== \"string\"))\r\n\t\t\t\t\tthrow new Error(\"Invalid argument:\"+ typeof topic);\r\n\r\n\t\t\t\tmessage = topic;\r\n\t\t\t\tif (typeof message.destinationName === \"undefined\")\r\n\t\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT,[message.destinationName,\"Message.destinationName\"]));\r\n\t\t\t\tclient.send(message); \r\n\r\n\t\t\t}else {\r\n\t\t\t\t//parameter checking in Message object \r\n\t\t\t\tmessage = new Message(payload);\r\n\t\t\t\tmessage.destinationName = topic;\r\n\t\t\t\tif(arguments.length >= 3)\r\n\t\t\t\t\tmessage.qos = qos;\r\n\t\t\t\tif(arguments.length >= 4)\r\n\t\t\t\t\tmessage.retained = retained;\r\n\t\t\t\tclient.send(message); \r\n\t\t\t}\r\n\t\t};\r\n\t\t\r\n\t\t/** \r\n\t\t * Normal disconnect of this Messaging client from its server.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#disconnect\r\n\t\t * @function\r\n\t\t * @throws {InvalidState} if the client is already disconnected.     \r\n\t\t */\r\n\t\tthis.disconnect = function () {\r\n\t\t\tclient.disconnect();\r\n\t\t};\r\n\t\t\r\n\t\t/** \r\n\t\t * Get the contents of the trace log.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#getTraceLog\r\n\t\t * @function\r\n\t\t * @return {Object[]} tracebuffer containing the time ordered trace records.\r\n\t\t */\r\n\t\tthis.getTraceLog = function () {\r\n\t\t\treturn client.getTraceLog();\r\n\t\t}\r\n\t\t\r\n\t\t/** \r\n\t\t * Start tracing.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#startTrace\r\n\t\t * @function\r\n\t\t */\r\n\t\tthis.startTrace = function () {\r\n\t\t\tclient.startTrace();\r\n\t\t};\r\n\t\t\r\n\t\t/** \r\n\t\t * Stop tracing.\r\n\t\t * \r\n\t\t * @name Paho.MQTT.Client#stopTrace\r\n\t\t * @function\r\n\t\t */\r\n\t\tthis.stopTrace = function () {\r\n\t\t\tclient.stopTrace();\r\n\t\t};\r\n\r\n\t\tthis.isConnected = function() {\r\n\t\t\treturn client.connected;\r\n\t\t};\r\n\t};\r\n\r\n\tClient.prototype = {\r\n\t\tget host() { return this._getHost(); },\r\n\t\tset host(newHost) { this._setHost(newHost); },\r\n\t\t\t\r\n\t\tget port() { return this._getPort(); },\r\n\t\tset port(newPort) { this._setPort(newPort); },\r\n\r\n\t\tget path() { return this._getPath(); },\r\n\t\tset path(newPath) { this._setPath(newPath); },\r\n\t\t\t\r\n\t\tget clientId() { return this._getClientId(); },\r\n\t\tset clientId(newClientId) { this._setClientId(newClientId); },\r\n\r\n\t\tget onConnectionLost() { return this._getOnConnectionLost(); },\r\n\t\tset onConnectionLost(newOnConnectionLost) { this._setOnConnectionLost(newOnConnectionLost); },\r\n\r\n\t\tget onMessageDelivered() { return this._getOnMessageDelivered(); },\r\n\t\tset onMessageDelivered(newOnMessageDelivered) { this._setOnMessageDelivered(newOnMessageDelivered); },\r\n\t\t\r\n\t\tget onMessageArrived() { return this._getOnMessageArrived(); },\r\n\t\tset onMessageArrived(newOnMessageArrived) { this._setOnMessageArrived(newOnMessageArrived); },\r\n\r\n\t\tget trace() { return this._getTrace(); },\r\n\t\tset trace(newTraceFunction) { this._setTrace(newTraceFunction); }\t\r\n\r\n\t};\r\n\t\r\n\t/** \r\n\t * An application message, sent or received.\r\n\t * <p>\r\n\t * All attributes may be null, which implies the default values.\r\n\t * \r\n\t * @name Paho.MQTT.Message\r\n\t * @constructor\r\n\t * @param {String|ArrayBuffer} payload The message data to be sent.\r\n\t * <p>\r\n\t * @property {string} payloadString <i>read only</i> The payload as a string if the payload consists of valid UTF-8 characters.\r\n\t * @property {ArrayBuffer} payloadBytes <i>read only</i> The payload as an ArrayBuffer.\r\n\t * <p>\r\n\t * @property {string} destinationName <b>mandatory</b> The name of the destination to which the message is to be sent\r\n\t *                    (for messages about to be sent) or the name of the destination from which the message has been received.\r\n\t *                    (for messages received by the onMessage function).\r\n\t * <p>\r\n\t * @property {number} qos The Quality of Service used to deliver the message.\r\n\t * <dl>\r\n\t *     <dt>0 Best effort (default).\r\n\t *     <dt>1 At least once.\r\n\t *     <dt>2 Exactly once.     \r\n\t * </dl>\r\n\t * <p>\r\n\t * @property {Boolean} retained If true, the message is to be retained by the server and delivered \r\n\t *                     to both current and future subscriptions.\r\n\t *                     If false the server only delivers the message to current subscribers, this is the default for new Messages. \r\n\t *                     A received message has the retained boolean set to true if the message was published \r\n\t *                     with the retained boolean set to true\r\n\t *                     and the subscrption was made after the message has been published. \r\n\t * <p>\r\n\t * @property {Boolean} duplicate <i>read only</i> If true, this message might be a duplicate of one which has already been received. \r\n\t *                     This is only set on messages received from the server.\r\n\t *                     \r\n\t */\r\n\tvar Message = function (newPayload) {  \r\n\t\tvar payload;\r\n\t\tif (   typeof newPayload === \"string\" \r\n\t\t\t|| newPayload instanceof ArrayBuffer\r\n\t\t\t|| newPayload instanceof Int8Array\r\n\t\t\t|| newPayload instanceof Uint8Array\r\n\t\t\t|| newPayload instanceof Int16Array\r\n\t\t\t|| newPayload instanceof Uint16Array\r\n\t\t\t|| newPayload instanceof Int32Array\r\n\t\t\t|| newPayload instanceof Uint32Array\r\n\t\t\t|| newPayload instanceof Float32Array\r\n\t\t\t|| newPayload instanceof Float64Array\r\n\t\t   ) {\r\n\t\t\tpayload = newPayload;\r\n\t\t} else {\r\n\t\t\tthrow (format(ERROR.INVALID_ARGUMENT, [newPayload, \"newPayload\"]));\r\n\t\t}\r\n\r\n\t\tthis._getPayloadString = function () {\r\n\t\t\tif (typeof payload === \"string\")\r\n\t\t\t\treturn payload;\r\n\t\t\telse\r\n\t\t\t\treturn parseUTF8(payload, 0, payload.length); \r\n\t\t};\r\n\r\n\t\tthis._getPayloadBytes = function() {\r\n\t\t\tif (typeof payload === \"string\") {\r\n\t\t\t\tvar buffer = new ArrayBuffer(UTF8Length(payload));\r\n\t\t\t\tvar byteStream = new Uint8Array(buffer); \r\n\t\t\t\tstringToUTF8(payload, byteStream, 0);\r\n\r\n\t\t\t\treturn byteStream;\r\n\t\t\t} else {\r\n\t\t\t\treturn payload;\r\n\t\t\t};\r\n\t\t};\r\n\r\n\t\tvar destinationName = undefined;\r\n\t\tthis._getDestinationName = function() { return destinationName; };\r\n\t\tthis._setDestinationName = function(newDestinationName) { \r\n\t\t\tif (typeof newDestinationName === \"string\")\r\n\t\t\t\tdestinationName = newDestinationName;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [newDestinationName, \"newDestinationName\"]));\r\n\t\t};\r\n\t\t\t\t\r\n\t\tvar qos = 0;\r\n\t\tthis._getQos = function() { return qos; };\r\n\t\tthis._setQos = function(newQos) { \r\n\t\t\tif (newQos === 0 || newQos === 1 || newQos === 2 )\r\n\t\t\t\tqos = newQos;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(\"Invalid argument:\"+newQos);\r\n\t\t};\r\n\r\n\t\tvar retained = false;\r\n\t\tthis._getRetained = function() { return retained; };\r\n\t\tthis._setRetained = function(newRetained) { \r\n\t\t\tif (typeof newRetained === \"boolean\")\r\n\t\t\t\tretained = newRetained;\r\n\t\t\telse \r\n\t\t\t\tthrow new Error(format(ERROR.INVALID_ARGUMENT, [newRetained, \"newRetained\"]));\r\n\t\t};\r\n\t\t\r\n\t\tvar duplicate = false;\r\n\t\tthis._getDuplicate = function() { return duplicate; };\r\n\t\tthis._setDuplicate = function(newDuplicate) { duplicate = newDuplicate; };\r\n\t};\r\n\t\r\n\tMessage.prototype = {\r\n\t\tget payloadString() { return this._getPayloadString(); },\r\n\t\tget payloadBytes() { return this._getPayloadBytes(); },\r\n\t\t\r\n\t\tget destinationName() { return this._getDestinationName(); },\r\n\t\tset destinationName(newDestinationName) { this._setDestinationName(newDestinationName); },\r\n\t\t\r\n\t\tget qos() { return this._getQos(); },\r\n\t\tset qos(newQos) { this._setQos(newQos); },\r\n\r\n\t\tget retained() { return this._getRetained(); },\r\n\t\tset retained(newRetained) { this._setRetained(newRetained); },\r\n\r\n\t\tget duplicate() { return this._getDuplicate(); },\r\n\t\tset duplicate(newDuplicate) { this._setDuplicate(newDuplicate); }\r\n\t};\r\n\t   \r\n\t// Module contents.\r\n\treturn {\r\n\t\tClient: Client,\r\n\t\tMessage: Message\r\n\t};\r\n})(window);\r\nexports.Paho = Paho;","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"tertiary\\\">\\r\\n    <ion-button slot=\\\"start\\\" (click)=\\\"closeControl()\\\">\\r\\n      <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n    <ion-title>Control</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content padding>\\r\\n  <div id=\\\"container\\\">\\r\\n    <!--<ion-fab-button *ngIf=\\\"encendido\\\" color=\\\"primary\\\">\\r\\n      <ion-icon name=\\\"bulb\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n    <ion-fab-button *ngIf=\\\"!encendido\\\" color=\\\"favorite\\\">\\r\\n      <ion-icon name=\\\"bulb\\\"></ion-icon>\\r\\n    </ion-fab-button>-->\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-img [src]=\\\"imgBtn\\\" style=\\\"align-items: center\\\"></ion-img>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-button (click)=\\\"changeStatus()\\\" shape=\\\"round\\\" [color]=\\\"colorBtn\\\" style=\\\"color:black\\\">{{textBtn}}</ion-button>\\r\\n          <!--<h3>Bit Inicio: {{inicio}}</h3>\\r\\n          <h3>Bit Paridad: {{paridad}}</h3>\\r\\n          <h3>Bit Estado: {{estado}}</h3>\\r\\n          <h3>Bit Encendido Lampara: {{encendido}}</h3>\\r\\n          <h3>Bit Confirmacion: {{confirmacion}}</h3>\\r\\n          <h3>Bit Cierre: {{cierre}}</h3>-->\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </div>\\r\\n</ion-content>\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"tertiary\\\">\\r\\n    <ion-button slot=\\\"start\\\" (click)=\\\"closeMonitor()\\\">\\r\\n      <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n    <ion-title>Monitor</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <!--\\r\\n  <ion-item>\\r\\n    <ion-label>Temperatura: {{temp}}</ion-label>\\r\\n  </ion-item>-->\\r\\n  <ion-item>\\r\\n    <ion-label>Temperatura Variable: {{varTemp}}</ion-label>\\r\\n  </ion-item>\\r\\n  <div style=\\\"display:block;\\\">\\r\\n    <canvas baseChart \\r\\n        [datasets]=\\\"lineChartData\\\" \\r\\n        [labels]=\\\"lineChartLabels\\\" \\r\\n        [options]=\\\"lineChartOptions\\\"\\r\\n        [colors]=\\\"lineChartColors\\\" \\r\\n        [legend]=\\\"lineChartLegend\\\" \\r\\n        [chartType]=\\\"lineChartType\\\" \\r\\n        [plugins]=\\\"lineChartPlugins\\\">\\r\\n    </canvas>\\r\\n  </div>\\r\\n</ion-content>\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"tertiary\\\">\\r\\n    <ion-button slot=\\\"start\\\" (click)=\\\"closeSetting()\\\">\\r\\n      <ion-icon name=\\\"close\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n    <ion-title>Configuración</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content>\\r\\n  <div id=\\\"container\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <ion-item>\\r\\n            <ion-label>Estilo: {{color}}</ion-label>\\r\\n            <ion-select placeholder=\\\"Seleccionar estilo\\\">\\r\\n              <ion-select-option value=\\\"0\\\">Dark</ion-select-option>\\r\\n              <ion-select-option value=\\\"1\\\">Light</ion-select-option>\\r\\n            </ion-select>\\r\\n          </ion-item>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <iframe src=\\\"https://shiftr.io/sergtello/PetCan/embed?zoom=1\\\" width=\\\"300\\\" \\r\\n            height=\\\"200\\\" frameborder=\\\"0\\\" webkitallowfullscreen mozallowfullscreen allowfullscreen>\\r\\n          </iframe>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </div>\\r\\n</ion-content>\";","export default \"<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <div id=\\\"container\\\">\\r\\n    <ion-grid>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <strong>{{name}}'s Home</strong>\\r\\n          <ion-toolbar>\\r\\n            <ion-title size=\\\"small\\\">Puedes seleccionar una de las opciones</ion-title>\\r\\n          </ion-toolbar>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <ion-row center>\\r\\n        <ion-col>\\r\\n          <ion-fab-button color=\\\"primary\\\" (click)=\\\"openControl()\\\">\\r\\n            <ion-icon name=\\\"bulb\\\"></ion-icon>\\r\\n          </ion-fab-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-fab-button color=\\\"medium\\\" (click)=\\\"openMonitor()\\\">\\r\\n            <ion-icon name=\\\"pulse\\\"></ion-icon>\\r\\n          </ion-fab-button>\\r\\n        </ion-col>\\r\\n        <ion-col>\\r\\n          <ion-fab-button color=\\\"favorite\\\" (click)=\\\"openSetting()\\\">\\r\\n            <ion-icon name=\\\"construct\\\"></ion-icon>\\r\\n          </ion-fab-button>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n      <br><br><br><br><br>\\r\\n      <ion-row>\\r\\n        <ion-col>\\r\\n          <p>Ionic/MQTT</p>\\r\\n          <p>\\r\\n            <a href=\\\"https://github.com/Johguxo/IoTSmartHouse\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferrer\\\">Para más información del proyecto</a>\\r\\n          </p>\\r\\n        </ion-col>\\r\\n      </ion-row>\\r\\n    </ion-grid>\\r\\n  </div>\\r\\n</ion-content>\\r\\n<ion-footer>\\r\\n  <div>\\r\\n  <ion-grid>\\r\\n    <ion-row>\\r\\n      <ion-col>\\r\\n        <ion-button style=\\\"display: grid;\\\" color=\\\"dark\\\" (click)=\\\"OnLogOut()\\\">Cerrar Sesion</ion-button>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n  </ion-grid>\\r\\n  </div>\\r\\n</ion-footer>\";","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n\\nion-fab-button {\\n  display: inline-flex;\\n  justify-content: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50c0lvVC9jb250cm9sL0M6XFxVc2Vyc1xcc2VyZ2lcXERlc2t0b3BcXDggU0VNRVNUUkVcXERlc2Fycm9sbG8gZGUgQXBsaWNhY2lvbmVzIE1vYmlsZXNcXElPVF9NT0JJTEVfTE9TUFJPUy9zcmNcXGFwcFxcY29tcG9uZW50c0lvVFxcY29udHJvbFxcY29udHJvbC5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50c0lvVC9jb250cm9sL2NvbnRyb2wuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxRQUFBO0VBQ0EsMkJBQUE7QUNDSjs7QURFRTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtBQ0NKOztBREVFO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBRUEsY0FBQTtFQUVBLFNBQUE7QUNESjs7QURJRTtFQUNFLHFCQUFBO0FDREo7O0FER0U7RUFDRSxvQkFBQTtFQUNBLHVCQUFBO0FDQUoiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzSW9UL2NvbnRyb2wvY29udHJvbC5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjb250YWluZXIge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbGVmdDogMDtcclxuICAgIHJpZ2h0OiAwO1xyXG4gICAgdG9wOiA1MCU7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XHJcbiAgfVxyXG4gIFxyXG4gICNjb250YWluZXIgc3Ryb25nIHtcclxuICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICAgIGxpbmUtaGVpZ2h0OiAyNnB4O1xyXG4gIH1cclxuICBcclxuICAjY29udGFpbmVyIHAge1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDIycHg7XHJcbiAgXHJcbiAgICBjb2xvcjogIzhjOGM4YztcclxuICBcclxuICAgIG1hcmdpbjogMDtcclxuICB9XHJcbiAgXHJcbiAgI2NvbnRhaW5lciBhIHtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICB9XHJcbiAgaW9uLWZhYi1idXR0b257XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogY2VudGVyO1xyXG4gIH0iLCIjY29udGFpbmVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICB0b3A6IDUwJTtcbiAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKC01MCUpO1xufVxuXG4jY29udGFpbmVyIHN0cm9uZyB7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgbGluZS1oZWlnaHQ6IDI2cHg7XG59XG5cbiNjb250YWluZXIgcCB7XG4gIGZvbnQtc2l6ZTogMTZweDtcbiAgbGluZS1oZWlnaHQ6IDIycHg7XG4gIGNvbG9yOiAjOGM4YzhjO1xuICBtYXJnaW46IDA7XG59XG5cbiNjb250YWluZXIgYSB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbn1cblxuaW9uLWZhYi1idXR0b24ge1xuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavParams } from '@ionic/angular';\r\nimport { ModalController } from '@ionic/angular';\r\nimport {Paho} from 'ng2-mqtt/mqttws31';\r\nimport { IotService } from '../../services/iot.service'\r\n@Component({\r\n  selector: 'app-control',\r\n  templateUrl: './control.component.html',\r\n  styleUrls: ['./control.component.scss'],\r\n})\r\nexport class ControlComponent implements OnInit {\r\n  public inicio: boolean = false;\r\n  public paridad: boolean = false;\r\n  public estado: Number = 0;\r\n  public encendido: boolean = false;\r\n  public confirmacion: boolean = false;\r\n  public cierre: boolean = false;\r\n  public nivel: number;\r\n  public textBtn:string=\"Apagado\";\r\n  public colorBtn:string=\"primary\";\r\n  public imgBtn:string=\"assets/images/foco_apagado.jpg\";\r\n  public Istatus:any;\r\n  public ICstatus:any;\r\n  public resP:any;\r\n  public resP2:any;\r\n  private client;\r\n  public userID:string;\r\n  mqttbroker = 'broker.shiftr.io';\r\n\r\n  constructor(\r\n    private toast:IotService,\r\n    private navparams: NavParams,\r\n    private modal:ModalController) {}\r\n\r\n  changeProp(newState:Number){\r\n    if(newState == 1){\r\n      this.textBtn = \"Prendido\";\r\n      this.imgBtn = \"assets/images/foco_prendido.jpg\"\r\n      this.colorBtn = 'rank'\r\n    }\r\n    else{\r\n      this.textBtn = \"Apagado\";\r\n      this.imgBtn = \"assets/images/foco_apagado.jpg\"\r\n      this.colorBtn = 'primary'\r\n    }\r\n  }\r\n  changeStatus() {\r\n    if(this.estado==1){\r\n      this.sendMessage(\"0\");\r\n    }\r\n    else{\r\n      this.sendMessage(\"1\")\r\n    }\r\n  }\r\n  ngOnInit() {\r\n    this.userID = this.navparams.get(\"uid\");\r\n    this.client = new Paho.MQTT.Client(this.mqttbroker, Number(80), this.userID);\r\n    this.onMessage();\r\n    this.client.onConnectionLost = this.onConnectionLost.bind(this);\r\n    this.client.connect({\r\n      onSuccess: this.onConnect.bind(this),\r\n      userName: 'android_client',\r\n      password:'123456',\r\n      keepAliveInterval:60\r\n    });\r\n  }\r\n  closeControl(){\r\n    this.modal.dismiss();\r\n  }\r\n  sendMessage(message: string) {\r\n    console.log(\"Mandar:\",message)\r\n    let packet = new Paho.MQTT.Message(message);\r\n    packet.destinationName = \"outState\";\r\n    packet.qos = 1;\r\n    this.client.send(packet);\r\n  }\r\n  onConnect() {\r\n    console.log('Conectado...');\r\n    this.sendMessage(\"2\")\r\n    this.client.subscribe('inState');\r\n  }\r\n  onConnectionLost(responseObject) {\r\n    this.client.onConnectionLost = (responseObject: Object) => {\r\n    this.toast.warning('Foquito is now offline')\r\n    };\r\n  }\r\n  onMessage() {\r\n    this.client.onMessageArrived = (message: Paho.MQTT.Message) => {\r\n      console.log('Recibe : ' + message.payloadString);\r\n      message.destinationName.indexOf('inState')\r\n      this.estado = Number(message.payloadString);\r\n      this.changeProp(this.estado);\r\n    };\r\n  }\r\n  \r\n}\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2NvbXBvbmVudHNJb1QvbW9uaXRvci9tb25pdG9yLmNvbXBvbmVudC5zY3NzIn0= */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavParams, ToastController } from '@ionic/angular';\r\nimport { ModalController } from '@ionic/angular';\r\nimport {Paho} from 'ng2-mqtt/mqttws31';\r\nimport { IotService } from '../../services/iot.service'\r\nimport { ChartDataSets, ChartOptions } from 'chart.js';\r\nimport { Color, Label } from 'ng2-charts';\r\n\r\n@Component({\r\n  selector: 'app-monitor',\r\n  templateUrl: './monitor.component.html',\r\n  styleUrls: ['./monitor.component.scss'],\r\n})\r\nexport class MonitorComponent implements OnInit {\r\n  public lineChartData: ChartDataSets[] = [\r\n    { data: [], label: 'Temperatura' },\r\n  ];\r\n  public lineChartLabels: Label[] = [];\r\n  public lineChartOptions: ChartOptions = {\r\n      responsive: true,\r\n      scales: {\r\n          xAxes: [{\r\n              display: false\r\n          }]\r\n      }\r\n  };\r\n  lineChartLegend = true;\r\n  lineChartPlugins = [];\r\n  lineChartType = 'line';\r\n  public temp: number;\r\n  public varTemp: number;\r\n  private client;\r\n  public userID : string;\r\n  mqttbroker = 'broker.shiftr.io';\r\n  constructor(\r\n    private toast:IotService,\r\n    private navparams: NavParams,\r\n    private modal:ModalController,\r\n  ){}\r\n\r\n  ngOnInit() {\r\n    this.temp = this.navparams.get(\"temp\");\r\n    this.userID = this.navparams.get(\"uid\");\r\n    this.client = new Paho.MQTT.Client(this.mqttbroker, Number(80), this.userID);\r\n    //this.client.onMessageArrived = this.onMessageArrived.bind(this);\r\n    this.onMessage();\r\n    this.client.onConnectionLost = this.onConnectionLost.bind(this);\r\n    this.client.connect({\r\n      onSuccess: this.onConnect.bind(this),\r\n      userName: 'android_client',\r\n      password:'123456',\r\n      keepAliveInterval:60\r\n    });\r\n    this.generateChart();\r\n  }\r\n  onConnect() {\r\n    console.log('Conectado...');\r\n    this.client.subscribe('inMonitor');\r\n  }\r\n  onConnectionLost(responseObject) {\r\n    this.client.onConnectionLost = (responseObject: Object) => {\r\n    // console.log('Connection lost : ' + JSON.stringify(responseObject));\r\n    this.toast.warning('Monitor is now offline')\r\n    };\r\n  }\r\n  onMessage() {\r\n    this.client.onMessageArrived = (message: Paho.MQTT.Message) => {\r\n      console.log('Temperatura : ' + message.payloadString);\r\n      message.destinationName.indexOf('inMonitor')\r\n      this.varTemp = Number(message.payloadString);\r\n    };\r\n  }\r\n\r\n  closeMonitor(){\r\n    this.modal.dismiss();\r\n  }\r\n  generateChart(){\r\n  }\r\n}\r\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvY29tcG9uZW50c0lvVC9zZXR0aW5nL0M6XFxVc2Vyc1xcc2VyZ2lcXERlc2t0b3BcXDggU0VNRVNUUkVcXERlc2Fycm9sbG8gZGUgQXBsaWNhY2lvbmVzIE1vYmlsZXNcXElPVF9NT0JJTEVfTE9TUFJPUy9zcmNcXGFwcFxcY29tcG9uZW50c0lvVFxcc2V0dGluZ1xcc2V0dGluZy5jb21wb25lbnQuc2NzcyIsInNyYy9hcHAvY29tcG9uZW50c0lvVC9zZXR0aW5nL3NldHRpbmcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxrQkFBQTtFQUNBLGtCQUFBO0VBQ0EsT0FBQTtFQUNBLFFBQUE7RUFDQSxRQUFBO0VBQ0EsMkJBQUE7QUNDSjs7QURFRTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtBQ0NKOztBREVFO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0VBRUEsY0FBQTtFQUVBLFNBQUE7QUNESjs7QURJRTtFQUNFLHFCQUFBO0FDREoiLCJmaWxlIjoic3JjL2FwcC9jb21wb25lbnRzSW9UL3NldHRpbmcvc2V0dGluZy5jb21wb25lbnQuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjb250YWluZXIge1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbGVmdDogMDtcclxuICAgIHJpZ2h0OiAwO1xyXG4gICAgdG9wOiA1MCU7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XHJcbiAgfVxyXG4gIFxyXG4gICNjb250YWluZXIgc3Ryb25nIHtcclxuICAgIGZvbnQtc2l6ZTogMjBweDtcclxuICAgIGxpbmUtaGVpZ2h0OiAyNnB4O1xyXG4gIH1cclxuICBcclxuICAjY29udGFpbmVyIHAge1xyXG4gICAgZm9udC1zaXplOiAxNnB4O1xyXG4gICAgbGluZS1oZWlnaHQ6IDIycHg7XHJcbiAgXHJcbiAgICBjb2xvcjogIzhjOGM4YztcclxuICBcclxuICAgIG1hcmdpbjogMDtcclxuICB9XHJcbiAgXHJcbiAgI2NvbnRhaW5lciBhIHtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICB9IiwiI2NvbnRhaW5lciB7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgdG9wOiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlWSgtNTAlKTtcbn1cblxuI2NvbnRhaW5lciBzdHJvbmcge1xuICBmb250LXNpemU6IDIwcHg7XG4gIGxpbmUtaGVpZ2h0OiAyNnB4O1xufVxuXG4jY29udGFpbmVyIHAge1xuICBmb250LXNpemU6IDE2cHg7XG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICBjb2xvcjogIzhjOGM4YztcbiAgbWFyZ2luOiAwO1xufVxuXG4jY29udGFpbmVyIGEge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG59Il19 */\";","import { Component, OnInit } from '@angular/core';\r\nimport { NavParams } from '@ionic/angular';\r\nimport { ModalController } from '@ionic/angular';\r\n@Component({\r\n  selector: 'app-setting',\r\n  templateUrl: './setting.component.html',\r\n  styleUrls: ['./setting.component.scss'],\r\n})\r\nexport class SettingComponent implements OnInit {\r\n  public color: string;\r\n  constructor(\r\n    private navparams: NavParams,\r\n    private modal:ModalController,\r\n  ){}\r\n\r\n  ngOnInit() {\r\n    if(this.navparams.get(\"color\") == true){\r\n      this.color = \"Ligth\";\r\n    }\r\n    else{\r\n      this.color = \"Dark\";\r\n    }\r\n  }\r\n  \r\n  closeSetting(){\r\n    this.modal.dismiss();\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { HomePage } from './home.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: HomePage,\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class HomePageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { HomePage } from './home.page';\r\n\r\nimport { HomePageRoutingModule } from './home-routing.module';\r\n\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    HomePageRoutingModule\r\n  ],\r\n  declarations: [HomePage]\r\n})\r\nexport class HomePageModule {}\r\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n\\nion-fab-button {\\n  display: inline-flex;\\n  justify-content: center;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9DOlxcVXNlcnNcXHNlcmdpXFxEZXNrdG9wXFw4IFNFTUVTVFJFXFxEZXNhcnJvbGxvIGRlIEFwbGljYWNpb25lcyBNb2JpbGVzXFxJT1RfTU9CSUxFX0xPU1BST1Mvc3JjXFxhcHBcXGhvbWVcXGhvbWUucGFnZS5zY3NzIiwic3JjL2FwcC9ob21lL2hvbWUucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSxrQkFBQTtFQUNBLE9BQUE7RUFDQSxRQUFBO0VBQ0EsUUFBQTtFQUNBLDJCQUFBO0FDQ0Y7O0FERUE7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7QUNDRjs7QURFQTtFQUNFLGVBQUE7RUFDQSxpQkFBQTtFQUVBLGNBQUE7RUFFQSxTQUFBO0FDREY7O0FESUE7RUFDRSxxQkFBQTtBQ0RGOztBREdBO0VBQ0Usb0JBQUE7RUFDQSx1QkFBQTtBQ0FGIiwiZmlsZSI6InNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIiNjb250YWluZXIge1xyXG4gIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgbGVmdDogMDtcclxuICByaWdodDogMDtcclxuICB0b3A6IDUwJTtcclxuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XHJcbn1cclxuXHJcbiNjb250YWluZXIgc3Ryb25nIHtcclxuICBmb250LXNpemU6IDIwcHg7XHJcbiAgbGluZS1oZWlnaHQ6IDI2cHg7XHJcbn1cclxuXHJcbiNjb250YWluZXIgcCB7XHJcbiAgZm9udC1zaXplOiAxNnB4O1xyXG4gIGxpbmUtaGVpZ2h0OiAyMnB4O1xyXG5cclxuICBjb2xvcjogIzhjOGM4YztcclxuXHJcbiAgbWFyZ2luOiAwO1xyXG59XHJcblxyXG4jY29udGFpbmVyIGEge1xyXG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxufVxyXG5pb24tZmFiLWJ1dHRvbntcclxuICBkaXNwbGF5OiBpbmxpbmUtZmxleDtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxufSIsIiNjb250YWluZXIge1xuICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG59XG5cbiNjb250YWluZXIgc3Ryb25nIHtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBsaW5lLWhlaWdodDogMjZweDtcbn1cblxuI2NvbnRhaW5lciBwIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBsaW5lLWhlaWdodDogMjJweDtcbiAgY29sb3I6ICM4YzhjOGM7XG4gIG1hcmdpbjogMDtcbn1cblxuI2NvbnRhaW5lciBhIHtcbiAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xufVxuXG5pb24tZmFiLWJ1dHRvbiB7XG4gIGRpc3BsYXk6IGlubGluZS1mbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbn0iXX0= */\";","import { Component } from '@angular/core';\r\nimport { AuthService } from 'src/app/services/auth.service';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { Router } from \"@angular/router\";\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport { IotService } from '../services/iot.service';\r\nimport { map } from 'rxjs/operators';\r\nimport { ControlComponent } from '../componentsIoT/control/control.component';\r\nimport { MonitorComponent } from '../componentsIoT/monitor/monitor.component';\r\nimport { SettingComponent } from '../componentsIoT/setting/setting.component';\r\n@Component({\r\n  selector: 'app-home',\r\n  templateUrl: 'home.page.html',\r\n  styleUrls: ['home.page.scss'],\r\n})\r\nexport class HomePage {\r\n  public uid:string;\r\n  public data:any = {};\r\n  public name:string=\"\";\r\n  public setting:boolean;\r\n  public monitor:number;\r\n  constructor(\r\n    public auth:AuthService,\r\n    public iotService: IotService,\r\n    private router:Router,\r\n    private modal:ModalController,\r\n    private AFauth : AngularFireAuth\r\n    ) {}\r\n    OnLogOut(){\r\n      this.auth.logout();\r\n    }\r\n    ngOnInit(){\r\n      this.AFauth.authState.subscribe(data => {\r\n        this.uid =  data.uid;\r\n        this.iotService.consultId(this.uid).subscribe(resultado => {\r\n          this.data = resultado.payload.data()\r\n          this.setting = this.data.setting;\r\n          this.name = this.data.name;\r\n          this.monitor = this.data.monitor;\r\n        });\r\n      });\r\n      \r\n    };\r\n    openControl(){\r\n      this.modal.create({\r\n        component: ControlComponent,\r\n        componentProps:{\r\n          uid: this.uid\r\n        }\r\n      }).then((modal)=>modal.present())\r\n    };\r\n    openMonitor(){\r\n      this.modal.create({\r\n        component: MonitorComponent,\r\n        componentProps:{\r\n          temp: this.monitor,\r\n          uid: this.uid\r\n        }\r\n      }).then((modal)=>modal.present())\r\n    };\r\n    openSetting(){\r\n      this.modal.create({\r\n        component: SettingComponent,\r\n        componentProps:{\r\n          color: this.setting\r\n        }\r\n      }).then((modal)=>modal.present())\r\n    };\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { Router } from \"@angular/router\";\r\nimport { AngularFireAuth } from \"@angular/fire/auth\";\r\n\r\ndeclare let toastr:any\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class IotService {\r\n\r\n  constructor(\r\n    private AFauth : AngularFireAuth,\r\n    private router : Router,\r\n    private db: AngularFirestore,\r\n    ){}\r\n    consultId(uid : string){\r\n      return this.db.collection('users').doc(uid).snapshotChanges()\r\n        /*return new Promise ((resolve, reject) => {\r\n          .then( res =>{\r\n            // console.log(res.user.uid);\r\n          const uid = res.user.uid;\r\n            this.db.collection('users').doc(uid).set({\r\n              name : name,\r\n              uid : uid\r\n            })\r\n          resolve(res)\r\n        }).catch( err => reject(err))\r\n      })*/\r\n    }\r\n    success(message: string, title?: string){\r\n      toastr.success(message, title)\r\n    }\r\n    info(message: string, title?: string){\r\n        toastr.info(message, title)\r\n    }\r\n    error(message: string, title?: string){\r\n        toastr.error(message, title)\r\n    }\r\n    warning(message: string, title?: string){\r\n        toastr.warning(message, title)\r\n    }\r\n}"]}